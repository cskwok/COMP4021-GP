(this["webpackJsonpsocial-media"]=this["webpackJsonpsocial-media"]||[]).push([[0],{128:function(e,t,a){e.exports=a(257)},130:function(e,t,a){},156:function(e,t){},158:function(e,t){},196:function(e,t){},197:function(e,t){},257:function(e,t,a){"use strict";a.r(t);a(129),a(66),a(130),a(131);var n=a(0),r=a.n(n),c=a(121),s=a.n(c),l=a(13),i=a(12),o=a(1),m=a.n(o),u=a(4),d=a(3),p=a(2),f=a.n(p),b=a(24),g=a(63),h=a.n(g),E=Object(n.createContext)(),v=function(e){var t=e.children,a=Object(n.useState)(""),c=Object(d.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)(!1),p=Object(d.a)(o,2),b=p[0],g=p[1],v=Object(n.useState)({}),j=Object(d.a)(v,2),x=j[0],y=j[1],N=Object(n.useState)(!0),O=Object(d.a)(N,2),k=O[0],w=O[1],S=Object(n.useState)(""),C=Object(d.a)(S,2),I=C[0],F=C[1],L=Object(n.useState)([]),q=Object(d.a)(L,2),J=q[0],T=q[1],R=Object(n.useState)(!0),P=Object(d.a)(R,2),z=P[0],D=P[1];function B(){return(B=Object(u.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return e.next=4,f.a.get("/api/users/"+t);case 4:(a=e.sent).data.success&&(n={pic:a.data.rows[0].pic,username:a.data.rows[0].username,nickname:a.data.rows[0].nickname},g(!0),y(n),w(!1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!1),localStorage.clear(),e.next=4,f.a.get("/api/auth/logout");case 4:e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("jwt")){e.next=2;break}return e.abrupt("return");case 2:if(t="bearer "+JSON.parse(localStorage.getItem("jwt")).token,!(h.a.decode(JSON.parse(localStorage.getItem("jwt")).token,{complete:!0}).payload.exp<=Date.now()/1e3+60)){e.next=10;break}return a={headers:{"Content-Type":"application/json",authorization:t}},e.next=8,f.a.get("/api/auth/refreshToken",a);case 8:(n=e.sent).data.success?localStorage.setItem("jwt",JSON.stringify({token:n.data.token,username:n.data.username,nickname:n.data.nickname,login:!0})):A();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,s,l,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,_();case 3:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=7,f.a.post("/api/search",JSON.stringify({query:t}),n);case 7:if(!(r=e.sent).data.success){e.next=28;break}if(c=r.data.results,!localStorage.getItem("jwt")){e.next=26;break}s=0;case 12:if(!(s<c.length)){e.next=26;break}return e.next=15,f.a.get("/api/friends/".concat(c[s].username,"/isFriend"),n);case 15:return l=e.sent,e.next=18,f.a.get("/api/friends/".concat(c[s].username,"/isSentRequest"),n);case 18:return i=e.sent,e.next=21,f.a.get("/api/friends/".concat(c[s].username,"/isReceivedRequest"),n);case 21:o=e.sent,l.data.success&&i.data.success&&(c[s].isFriend=l.data.isFriend,c[s].isSent=i.data.isSent,c[s].isReceived=o.data.isReceived);case 23:s++,e.next=12;break;case 26:T(c),D(!1);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.get("/api/friends/request/".concat(t),n);case 6:e.sent.data.success&&(r=Object(i.a)(J),c=r.findIndex((function(e){return e.username===t})),r[c].isFriend=!0,T(r));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.delete("/api/friends/request/".concat(t),n);case 6:e.sent.data.success&&(r=Object(i.a)(J),c=r.findIndex((function(e){return e.username===t})),r[c].isReceived=!1,r[c].isSent=!1,T(r));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.delete("/api/friends/".concat(t),n);case 6:e.sent.data.success&&(r=Object(i.a)(J),c=r.findIndex((function(e){return e.username===t})),r[c].isFriend=!1,T(r));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.get("/api/friends/request/send/".concat(t),n);case 6:e.sent.data.success&&(r=Object(i.a)(J),c=r.findIndex((function(e){return e.username===t})),r[c].isSent=!0,T(r));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(E.Provider,{value:{isLogin:b,setIsLogin:g,logOut:A,checkToken:_,msg:s,setMsg:l,getInfo:function(e){return B.apply(this,arguments)},info:x,search:function(e){return Y.apply(this,arguments)},results:J,resultsLoading:z,query:I,setQuery:F,unFriend:function(e){return Q.apply(this,arguments)},cancelRequest:function(e){return V.apply(this,arguments)},acceptRequest:function(e){return H.apply(this,arguments)},sentRequest:function(e){return G.apply(this,arguments)},setInfo:y,infoLoading:k}},t)},j=Object(n.createContext)(),x=function(e){var t=e.children,a=(Object(b.g)(),Object(n.useState)({})),c=Object(d.a)(a,2),s=c[0],o=c[1],p=Object(n.useState)([]),g=Object(d.a)(p,2),h=g[0],v=g[1],x=Object(n.useState)({}),y=Object(d.a)(x,2),N=y[0],O=y[1],k=Object(n.useState)(!0),w=Object(d.a)(k,2),S=w[0],C=w[1],I=Object(n.useState)(!0),F=Object(d.a)(I,2),L=F[0],q=F[1],J=Object(n.useState)(!0),T=Object(d.a)(J,2),R=T[0],P=T[1],z=Object(n.useState)(""),D=Object(d.a)(z,2),B=D[0],A=D[1],M=Object(n.useState)(""),_=Object(d.a)(M,2),U=_[0],Y=_[1],H=Object(n.useState)(!1),V=Object(d.a)(H,2),Q=V[0],G=V[1],W=Object(n.useState)(!0),K=Object(d.a)(W,2),X=K[0],Z=K[1],$=Object(n.useContext)(E),ee=$.checkToken,te=$.info,ae=$.setInfo;function ne(){return(ne=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,s,l,i,u,d,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return e.next=4,f.a.get("/api/users/"+t);case 4:if(!(a=e.sent).data.success){e.next=41;break}if(n={username:a.data.rows[0].username,nickname:a.data.rows[0].nickname,bio:a.data.rows[0].bio,numOfFriends:a.data.rows[0].numOfFriends,publicity:a.data.rows[0].publicity,pic:a.data.rows[0].pic},!localStorage.getItem("jwt")){e.next=27;break}if(JSON.parse(localStorage.getItem("jwt")).username===t){e.next=25;break}return r="bearer "+JSON.parse(localStorage.getItem("jwt")).token,c={headers:{"Content-Type":"application/json",authorization:r}},e.next=13,f.a.get("/api/friends/".concat(t,"/isFriend"),c);case 13:return s=e.sent,e.next=16,f.a.get("/api/friends/".concat(t,"/isSentRequest"),c);case 16:return l=e.sent,e.next=19,f.a.get("/api/friends/".concat(t,"/isReceivedRequest"),c);case 19:i=e.sent,n.isFriend=s.data.isFriend,n.isSent=l.data.isSent,n.isReceived=i.data.isReceived,e.next=27;break;case 25:n.isFriend=!1,n.isRequest=!1;case 27:if(!(localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).username===t||"public"===n.publicity)){e.next=31;break}G(!0),e.next=38;break;case 31:if(!localStorage.getItem("jwt")){e.next=38;break}return u="bearer "+JSON.parse(localStorage.getItem("jwt")).token,d={headers:{"Content-Type":"application/json",authorization:u}},e.next=36,f.a.get("/api/friends/".concat(t,"/isFriend"),d);case 36:(p=e.sent).data.success&&G(p.data.isFriend);case 38:o(n),C(!1),Z(!1);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,s,l,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return e.next=4,f.a.get("/api/friends/".concat(t));case 4:if(!(a=e.sent).data.success){e.next=27;break}if(n=a.data.friends,!localStorage.getItem("jwt")){e.next=25;break}r="bearer "+JSON.parse(localStorage.getItem("jwt")).token,c={headers:{"Content-Type":"application/json",authorization:r}},s=0;case 11:if(!(s<n.length)){e.next=25;break}return e.next=14,f.a.get("/api/friends/".concat(n[s].username,"/isFriend"),c);case 14:return l=e.sent,e.next=17,f.a.get("/api/friends/".concat(n[s].username,"/isSentRequest"),c);case 17:return i=e.sent,e.next=20,f.a.get("/api/friends/".concat(n[s].username,"/isReceivedRequest"),c);case 20:o=e.sent,l.data.success&&i.data.success&&(n[s].isFriend=l.data.isFriend,n[s].isSent=i.data.isSent,n[s].isReceived=o.data.isReceived);case 22:s++,e.next=11;break;case 25:v(n),q(!1);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},r={received:[],sent:[]},e.next=7,f.a.get("/api/friends/request/received/".concat(t),n);case 7:if(!(c=e.sent).data.success){e.next=13;break}return e.next=11,f.a.get("/api/friends/request/sent/".concat(t),n);case 11:(s=e.sent).data.success&&(r.received=c.data.receivedReq,r.sent=s.data.sentReq,O(r),P(!1));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,u,d,p,b,g;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.get("/api/friends/request/".concat(t),n);case 6:(r=e.sent).data.success&&(c=Object(i.a)(h),s.username===JSON.parse(localStorage.getItem("jwt")).username?((u=Object(l.a)({},N)).received=u.received.filter((function(e){return e.username!==t})),O(u),c.push(r.data.friend),v(c),(d=Object(l.a)({},s)).numOfFriends+=1,o(d)):c.find((function(e){return e.username===t}))?(p=Object(i.a)(h),b=p.findIndex((function(e){return e.username===t})),p[b].isFriend=!0,v(p)):((g=Object(l.a)({},s)).isFriend=!0,o(g)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,u,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.delete("/api/friends/request/".concat(t),n);case 6:e.sent.data.success&&(r=Object(i.a)(h),s.username===JSON.parse(localStorage.getItem("jwt")).username?((c=Object(l.a)({},N)).received.find((function(e){return e.username===t}))?c.received=c.received.filter((function(e){return e.username!==t})):c.sent.find((function(e){return e.username===t}))&&(c.sent=c.sent.filter((function(e){return e.username!==t}))),O(c)):r.find((function(e){return e.username===t}))?(u=r.findIndex((function(e){return e.username===t})),r[u].isReceived=!1,r[u].isSent=!1,v(r)):((d=Object(l.a)({},s)).isReceived=!1,d.isSent=!1,o(d)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,u,d,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.delete("/api/friends/".concat(t),n);case 6:e.sent.data.success&&(r=Object(i.a)(h),s.username===JSON.parse(localStorage.getItem("jwt")).username?(c=(c=Object(i.a)(h)).filter((function(e){return e.username!==t})),v(c),(u=Object(l.a)({},s)).numOfFriends-=1,o(u)):r.find((function(e){return e.username===t}))?(d=r.findIndex((function(e){return e.username===t})),r[d].isFriend=!1,v(r)):((p=Object(l.a)({},s)).isFriend=!1,o(p)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.get("/api/friends/request/send/".concat(t),n);case 6:e.sent.data.success&&((r=Object(i.a)(h)).find((function(e){return e.username===t}))?(c=r.findIndex((function(e){return e.username===t})),r[c].isSent=!0,v(r)):((u=Object(l.a)({},s)).isSent=!0,o(u)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return(me=Object(u.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.put("/api/users/edit/password",JSON.stringify({password:t.password,newPassword:t.newPassword}),n);case 6:(r=e.sent).data.success?A(r.data.msg):Y(r.data.msg);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.put("/api/users/edit/nickname",JSON.stringify({nickname:t}),n);case 6:(r=e.sent).data.success?(A(r.data.msg),(c=Object(l.a)({},s)).nickname=t,o(c),Object(l.a)({},te).nickname=t,ae(c)):Y(r.data.msg);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.put("/api/users/edit/bio",JSON.stringify({bio:t}),n);case 6:(r=e.sent).data.success?(A(r.data.msg),(c=Object(l.a)({},s)).bio=t,o(c)):Y(r.data.msg);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return(pe=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.put("/api/users/edit/publicity",JSON.stringify({publicity:t}),n);case 6:(r=e.sent).data.success?(A(r.data.msg),(c=Object(l.a)({},s)).publicity=t,o(c)):Y(r.data.msg);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.put("/api/users/edit/pic",JSON.stringify({pic:t}),n);case 6:r=e.sent,console.log(r),r.data.success?(A(r.data.msg),(c=Object(l.a)({},s)).pic=t,o(c),Object(l.a)({},te).pic=t,ae(c)):Y(r.data.msg);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){return(be=Object(u.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:if(!localStorage.getItem("jwt")||JSON.parse(localStorage.getItem("jwt")).username!==t){e.next=5;break}return G(!0),e.abrupt("return",Z(!1));case 5:if(!s.publicity){e.next=8;break}return G(!0),e.abrupt("return",Z(!1));case 8:if(!localStorage.getItem("jwt")){e.next=17;break}return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=13,f.a.get("/api/friends/".concat(t,"/isFriend"),n);case 13:if(!(r=e.sent).data.success){e.next=17;break}return G(r.data.isFriend),e.abrupt("return",Z(!1));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(j.Provider,{value:{profile:s,friends:h,profileLoading:S,friendsLoading:L,getProfile:function(e){return ne.apply(this,arguments)},getFriends:function(e){return re.apply(this,arguments)},getFriendRequests:function(e){return ce.apply(this,arguments)},friendRequests:N,friendRequestsLoading:R,acceptRequest:function(e){return se.apply(this,arguments)},cancelRequest:function(e){return le.apply(this,arguments)},unFriend:function(e){return ie.apply(this,arguments)},sentRequest:function(e){return oe.apply(this,arguments)},editPassword:function(e){return me.apply(this,arguments)},editNickname:function(e){return ue.apply(this,arguments)},editBio:function(e){return de.apply(this,arguments)},editPublicity:function(e){return pe.apply(this,arguments)},editPic:function(e){return fe.apply(this,arguments)},msg:B,setMsg:A,error:U,setError:Y,getPermission:function(e){return be.apply(this,arguments)},permission:Q,permissionLoading:X}},t)},y=function(){return r.a.createElement("div",{className:"d-flex justify-content-center mt-3"},r.a.createElement("div",{className:"spinner-grow text-secondary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},N=function(){var e=Object(n.useContext)(j),t=e.profile,a=e.unFriend,c=e.cancelRequest,s=e.acceptRequest,l=e.sentRequest,i=e.profileLoading;return r.a.createElement("div",{className:"card mb-2"},r.a.createElement("div",{className:"d-flex"},i?null:r.a.createElement("div",{className:"card-body"},r.a.createElement("img",{src:"/img/".concat(t.pic),className:"mr-3 img-thumbnail profile-pic-lg"}),r.a.createElement("div",null,r.a.createElement("h3",null,t.nickname)),r.a.createElement("div",null," ",r.a.createElement("h5",{className:"text-muted"},"@",t.username)),r.a.createElement("div",null,r.a.createElement("h5",null," ",t.bio))),r.a.createElement("div",{className:"ml-auto mt-auto mr-3 mb-3 "},localStorage.getItem("jwt")?r.a.createElement(r.a.Fragment,null,i?null:t.isFriend?r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){a(t.username)}},"Unfriend"):t.isSent?r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){c(t.username)}},"Cancel Request"):t.isReceived?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){s(t.username)}},"Accept Request"),r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){c(t.username)}},"Reject Request")):t.username!==JSON.parse(localStorage.getItem("jwt")).username?r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){l(t.username)}},"Add Friend"):null):null)))},O=Object(n.createContext)(),k=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(d.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)([]),p=Object(d.a)(o,2),b=p[0],g=p[1],h=Object(n.useState)(!0),v=Object(d.a)(h,2),j=v[0],x=v[1],y=Object(n.useState)(!0),N=Object(d.a)(y,2),k=N[0],w=N[1],S=Object(n.useState)(null),C=Object(d.a)(S,2),I=C[0],F=C[1],L=Object(n.useState)(null),q=Object(d.a)(L,2),J=q[0],T=q[1],R=Object(n.useContext)(E).checkToken;function P(){return(P=Object(u.a)(m.a.mark((function e(t){var a,n,r,c,s,i,o,u,d,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return e.next=4,f.a.get("/api/posts/"+t);case 4:if(!(a=e.sent).data.success){e.next=39;break}n=a.data.posts,r=0;case 8:if(!(r<n.length)){e.next=16;break}return e.next=11,f.a.get("/api/comments/".concat(n[r].postid));case 11:(c=e.sent).data.success&&(n[r].comments=c.data.comments);case 13:r++,e.next=8;break;case 16:if(!localStorage.getItem("jwt")){e.next=37;break}s="bearer "+JSON.parse(localStorage.getItem("jwt")).token,i={headers:{"Content-Type":"application/json",authorization:s}},o=0;case 20:if(!(o<n.length)){e.next=37;break}return e.next=23,f.a.get("/api/posts/".concat(n[o].postid,"/hasLike"),i);case 23:(u=e.sent).data.success&&(n[o].hasLike=u.data.hasLike),d=0;case 26:if(!(d<n[o].comments.length)){e.next=34;break}return e.next=29,f.a.get("/api/comments/".concat(n[o].comments[d].commentid,"/hasLike"),i);case 29:(p=e.sent).data.success&&(n[o].comments[d].hasLike=p.data.hasLike);case 31:d++,e.next=26;break;case 34:o++,e.next=20;break;case 37:l(n),x(!1);case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(u.a)(m.a.mark((function e(){var t,a,n,r,c,s,i,o,u,d,p,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return t="bearer "+JSON.parse(localStorage.getItem("jwt")).token,a={headers:{"Content-Type":"application/json",authorization:t}},e.next=6,f.a.get("/api/feed",a);case 6:if(!(n=e.sent).data.success){e.next=41;break}r=n.data.posts,c=0;case 10:if(!(c<r.length)){e.next=18;break}return e.next=13,f.a.get("/api/comments/".concat(r[c].postid));case 13:(s=e.sent).data.success&&(r[c].comments=s.data.comments);case 15:c++,e.next=10;break;case 18:if(!localStorage.getItem("jwt")){e.next=39;break}i="bearer "+JSON.parse(localStorage.getItem("jwt")).token,o={headers:{"Content-Type":"application/json",authorization:i}},u=0;case 22:if(!(u<r.length)){e.next=39;break}return e.next=25,f.a.get("/api/posts/".concat(r[u].postid,"/hasLike"),o);case 25:(d=e.sent).data.success&&(r[u].hasLike=d.data.hasLike),p=0;case 28:if(!(p<r[u].comments.length)){e.next=36;break}return e.next=31,f.a.get("/api/comments/".concat(r[u].comments[p].commentid,"/hasLike"),o);case 31:(b=e.sent).data.success&&(r[u].comments[p].hasLike=b.data.hasLike);case 33:p++,e.next=28;break;case 36:u++,e.next=22;break;case 39:l(r),x(!1);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(u.a)(m.a.mark((function e(t,a){var n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return n="bearer "+JSON.parse(localStorage.getItem("jwt")).token,r={headers:{"Content-Type":"application/json",authorization:n}},e.next=6,f.a.post("/api/posts",JSON.stringify({content:t,postPic:a}),r);case 6:(c=e.sent).data.success&&l((function(e){return[c.data.post].concat(Object(i.a)(e))}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(u.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.delete("/api/posts/delete/".concat(t),n);case 6:e.sent.data.success&&(l(s.filter((function(e){return e.postid!==t}))),F(null));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(u.a)(m.a.mark((function e(t,a){var n,r,c,o,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return n="bearer "+JSON.parse(localStorage.getItem("jwt")).token,r={headers:{"Content-Type":"application/json",authorization:n}},e.next=6,f.a.put("/api/posts/edit/".concat(t),JSON.stringify({content:a}),r);case 6:(c=e.sent).data.success&&(o=Object(i.a)(s),u=o.findIndex((function(e){return e.postid===t})),o[u].content=c.data.post.content,o[u].editTime=c.data.post.editTime,l(o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(u.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("jwt")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,R();case 4:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=8,f.a.get("/api/posts/".concat(t,"/like"),n);case 8:e.sent.data.success&&(r=Object(i.a)(s),c=r.findIndex((function(e){return e.postid===t})),r[c].hasLike?(r[c].numOfLikes-=1,r[c].hasLike=!r[c].hasLike):(r[c].numOfLikes+=1,r[c].hasLike=!r[c].hasLike),l(r));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(u.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.get("/api/posts/like/".concat(t),n);case 6:(r=e.sent).data.success&&(g(r.data.likedBy),w(!1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(u.a)(m.a.mark((function e(t,a){var n,r,c,o,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return n="bearer "+JSON.parse(localStorage.getItem("jwt")).token,r={headers:{"Content-Type":"application/json",authorization:n}},e.next=6,f.a.post("/api/comments/".concat(t),JSON.stringify({comment:a}),r);case 6:(c=e.sent).data.success&&(o=Object(i.a)(s),u=o.findIndex((function(e){return e.postid===t})),o[u].comments.push(c.data.comment),l(o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(u.a)(m.a.mark((function e(t,a){var n,r,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return n="bearer "+JSON.parse(localStorage.getItem("jwt")).token,r={headers:{"Content-Type":"application/json",authorization:n}},e.next=6,f.a.delete("/api/comments/delete/".concat(a),r);case 6:e.sent.data.success&&(c=Object(i.a)(s),o=c.findIndex((function(e){return e.postid===t})),c[o].comments=c[o].comments.filter((function(e){return e.commentid!==a})),l(c),T(null));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(u.a)(m.a.mark((function e(t,a){var n,r,c,o,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("jwt")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,R();case 4:return n="bearer "+JSON.parse(localStorage.getItem("jwt")).token,r={headers:{"Content-Type":"application/json",authorization:n}},e.next=8,f.a.get("/api/comments/".concat(t,"/").concat(a,"/like"),r);case 8:e.sent.data.success&&(c=Object(i.a)(s),o=c.findIndex((function(e){return e.postid===t})),u=c[o].comments.findIndex((function(e){return e.commentid===a})),c[o].comments[u].hasLike?(c[o].comments[u].numOfLikes-=1,c[o].comments[u].hasLike=!c[o].comments[u].hasLike):(c[o].comments[u].numOfLikes+=1,c[o].comments[u].hasLike=!c[o].comments[u].hasLike),l(c));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(u.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return a="bearer "+JSON.parse(localStorage.getItem("jwt")).token,n={headers:{"Content-Type":"application/json",authorization:a}},e.next=6,f.a.get("/api/comments/like/".concat(t),n);case 6:(r=e.sent).data.success&&(g(r.data.likedBy),w(!1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(O.Provider,{value:{posts:s,getPosts:function(e){return P.apply(this,arguments)},getFeed:function(){return z.apply(this,arguments)},addPost:function(e,t){return D.apply(this,arguments)},editPost:function(e,t){return A.apply(this,arguments)},deletePost:function(e){return B.apply(this,arguments)},handlePostLike:function(e){return M.apply(this,arguments)},getPostLikedBy:function(e){return _.apply(this,arguments)},likedBy:b,addComment:function(e,t){return U.apply(this,arguments)},deleteComment:function(e,t){return Y.apply(this,arguments)},handleCommentLike:function(e,t){return H.apply(this,arguments)},getCommentLikedBy:function(e){return V.apply(this,arguments)},postLoading:j,likeListloading:k,postToDelete:I,setPostToDelete:F,commentToDelete:J,setcommentToDelete:T}},t)},w=function(e){var t=e.comment,a=e.postUsername,c=Object(n.useContext)(O),s=c.handleCommentLike,l=c.getCommentLikedBy,i=c.setcommentToDelete;return r.a.createElement("div",{className:"media"},r.a.createElement("a",{href:"/profile/".concat(t.username)},r.a.createElement("img",{src:"/img/".concat(t.pic),className:"mr-3 img-thumbnail profile-pic"})),r.a.createElement("div",{className:"media-body w-100"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,r.a.createElement("a",{href:"/profile/".concat(t.username)},r.a.createElement("h5",{className:"mt-0"},t.nickname)," "),t.editTime?r.a.createElement("small",{className:"text-muted"},"Last Edited at: ",t.editTime):r.a.createElement("small",{className:"text-muted"},"Posted at: ",t.postTime),r.a.createElement("h5",{style:{whiteSpace:"pre-line"}},t.comment)),localStorage.getItem("jwt")&&(t.username==JSON.parse(localStorage.getItem("jwt")).username||a==JSON.parse(localStorage.getItem("jwt")).username)?r.a.createElement("div",{className:"ml-auto mr-2"},r.a.createElement("span",{className:"material-icons icon-btn","data-toggle":"modal","data-target":"#deleteConfirm",onClick:function(){return i([t.postid,t.commentid])}},"delete")):null),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("span",{className:"icon-btn icon-color",onClick:function(){s(t.postid,t.commentid)}},t.hasLike?r.a.createElement("span",{className:"material-icons align-middle like-after"},"favorite"):r.a.createElement("span",{className:"material-icons align-middle"},"favorite_border")),t.numOfLikes>0?r.a.createElement("span",{"data-toggle":"modal","data-target":"#likedByList",className:"align-middle ml-1 icon-btn icon-color",onClick:function(){l(t.commentid)}},t.numOfLikes):null),r.a.createElement("hr",null)))},S=function(e){var t=e.post;return r.a.createElement("div",null,t.comments.map((function(e,a){return r.a.createElement(w,{key:a,comment:e,postUsername:t.username})})))},C=function(e){var t=e.post,a=Object(n.useState)(""),c=Object(d.a)(a,2),s=c[0],l=c[1],i=Object(n.useContext)(O),o=i.handlePostLike,p=i.getPostLikedBy,f=i.addComment,b=i.setPostToDelete,g=i.editPost,h=Object(n.useContext)(E),v=h.info,j=h.infoLoading,x=Object(n.useState)(!1),y=Object(d.a)(x,2),N=y[0],k=y[1],w=Object(n.useState)(""),C=Object(d.a)(w,2),I=C[0],F=C[1],L=function(){var e=Object(u.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),s&&0!==s.trim().length){e.next=5;break}l(""),e.next=8;break;case 5:return e.next=7,f(t.postid,s);case 7:l("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){F(t.content)}),[t.content]);var q=function(){var e=Object(u.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),I&&0!==I.trim().length){e.next=5;break}F(""),e.next=9;break;case 5:return e.next=7,g(t.postid,I);case 7:F(""),k(!N);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Post media py-3 my-2 px-2 border rounded"},r.a.createElement("a",{href:"/profile/".concat(t.username)},r.a.createElement("img",{src:"/img/".concat(t.pic),className:"mr-2 img-thumbnail profile-pic"})),r.a.createElement("div",{className:"media-body w-100"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,r.a.createElement("a",{href:"/profile/".concat(t.username)},r.a.createElement("h5",{className:"mt-0"},t.nickname)," "),t.editTime?r.a.createElement("small",{className:"text-muted"},"Last Edited at: ",t.editTime):r.a.createElement("small",{className:"text-muted"},"Posted at: ",t.postTime),localStorage.getItem("jwt")?N?r.a.createElement("div",null,r.a.createElement("form",{className:"w-100",onSubmit:function(e){q(e)}},r.a.createElement("textarea",{className:"form-control mb-2 ",value:I,onChange:function(e){return F(e.target.value)}}),r.a.createElement("button",{className:"btn btn-light mb-2 ",type:"submit"},"Edit"),r.a.createElement("button",{className:"btn btn-light mb-2 ml-2 ",onClick:function(){F(t.content),k(!N)}},"Cancel"))):r.a.createElement("h5",{style:{whiteSpace:"pre-line"}},t.content):null,t.postPic?r.a.createElement("img",{src:"/img/".concat(t.postPic),className:" img-thumbnail post-pic"}):null),localStorage.getItem("jwt")&&t.username===JSON.parse(localStorage.getItem("jwt")).username?r.a.createElement("div",{className:"ml-auto"},r.a.createElement("div",{className:"material-icons icon-btn",onClick:function(){k(!N)}},"edit"),r.a.createElement("div",{className:"material-icons icon-btn","data-toggle":"modal","data-target":"#deleteConfirm",onClick:function(){return b(t.postid)}},"delete")):null),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("span",{className:"icon-btn",onClick:function(){o(t.postid)}},t.hasLike?r.a.createElement("span",{className:"material-icons align-middle like-after"},"favorite"):r.a.createElement("span",{className:"material-icons align-middle"},"favorite_border")),t.numOfLikes>0?r.a.createElement("span",{"data-toggle":"modal","data-target":"#likedByList",className:"align-middle ml-1 icon-btn icon-color",onClick:function(){return p(t.postid)}},t.numOfLikes):null),r.a.createElement("hr",null),r.a.createElement(S,{post:t}),localStorage.getItem("jwt")?r.a.createElement("div",{className:"media"},j?null:r.a.createElement("img",{src:"/img/".concat(v.pic),className:"mr-3 img-thumbnail profile-pic"}),r.a.createElement("form",{className:"media-body w-100",onSubmit:function(e){L(e)}},r.a.createElement("textarea",{className:"form-control mb-2",value:s,onChange:function(e){return l(e.target.value)},placeholder:"Leave some comments..."}),r.a.createElement("button",{className:"btn btn-light mb-2",type:"submit"},"Comment"))):null)))},I=function(){var e=Object(n.useContext)(O),t=e.posts,a=e.likedBy,c=e.postLoading,s=e.likeListloading,l=e.setPostToDelete,i=e.postToDelete,o=e.deletePost,d=e.setcommentToDelete,p=e.commentToDelete,f=e.deleteComment,b=function(){var e=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=3;break}return e.next=3,o(i);case 3:if(!p){e.next=6;break}return e.next=6,f(p[0],p[1]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(y,null):r.a.createElement("div",{className:"Posts"},t.length>0?t.map((function(e,t){return r.a.createElement(C,{key:t,post:e})})):r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,"This user hasn't posted anything yet")),r.a.createElement("div",{className:"modal",id:"likedByList",tabIndex:"-1",role:"dialog","aria-labelledby":"likedByListTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-scrollable modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"likedByListTitle"},"liked By"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},s?r.a.createElement(y,null):a.map((function(e,t){return r.a.createElement("a",{key:t,href:"/profile/".concat(e.username)},r.a.createElement("div",{className:"media mx-2 my-2 px-2 border rounded"},r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("img",{src:"/img/".concat(e.pic),className:"mr-3 img-thumbnail profile-pic"})),r.a.createElement("div",{className:"media-body w-100 mt-2"},r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("h5",{className:"mt-0"},e.nickname),r.a.createElement("h5",{className:"mt-0 text-muted"},"@",e.username)))))}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"))))),r.a.createElement("div",{className:"modal",id:"deleteConfirm",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteConfirmLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("div",{className:"modal-title",id:"deleteConfirmLabel"},r.a.createElement("h5",null,"Do you want to delete this ",i?"post":"comment","?"),r.a.createElement("small",{className:"text-muted"},"This cannot be undone!")),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-light","data-dismiss":"modal",onClick:function(){return b()}},"Delete"),i?r.a.createElement("button",{type:"button",className:"btn btn-light","data-dismiss":"modal",onClick:function(){return l(null)}},"Cancel"):r.a.createElement("button",{type:"button",className:"btn btn-light","data-dismiss":"modal",onClick:function(){return d(null)}},"Cancel")))))))},F=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(d.a)(s,2),i=l[0],o=l[1],p=Object(n.useState)(""),g=Object(d.a)(p,2),h=g[0],v=g[1],x=Object(n.useContext)(O),N=x.getPosts,k=x.addPost,w=Object(n.useContext)(j),S=w.permission,C=(w.permissionLoading,w.profileLoading),F=(w.getPermission,w.profile,Object(n.useContext)(E)),L=F.info,q=F.infoLoading,J=Object(b.h)().username,T=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(h&&h.trim().length>0||a||a.trim().length>0)){e.next=9;break}return e.next=4,k(h,a);case 4:v(""),c(""),o(""),e.next=10;break;case 9:v("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files[0]){e.next=2;break}return e.abrupt("return");case 2:return o(t.target.files[0]),(a=new FormData).append("image",t.target.files[0]),n={headers:{"Content-Type":"application/x-www-form-urlencoded"}},e.next=8,f.a.post("/upload/image",a,n);case 8:(r=e.sent).data.success&&c(r.data.image);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){S&&N(J)}),[S]),r.a.createElement(r.a.Fragment,null,C?null:localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).username===J?r.a.createElement("div",{className:"media my-4 py-3 ml-3 mr-2"},q?null:r.a.createElement("img",{src:"/img/".concat(L.pic),className:"mr-3 img-thumbnail profile-pic"}),r.a.createElement("form",{className:" media-body w-100",onSubmit:function(e){T(e)}},r.a.createElement("textarea",{className:"form-control mb-2 ",value:h,onChange:function(e){return v(e.target.value)},placeholder:"Hello ".concat(JSON.parse(localStorage.getItem("jwt")).nickname,", how are you today?")}),a?r.a.createElement("div",{className:"preview"},r.a.createElement("img",{src:"/img/".concat(a),className:"mr-3 img-thumbnail profile-pic"})):null,r.a.createElement("div",{className:"custom-file my-2"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",accept:".jpg,.png,.svg,.gif",onChange:function(e){R(e)}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},r.a.createElement("span",{className:"material-icons align-middle"}," add_photo_alternate")," ",i.name)),r.a.createElement("button",{className:"btn btn-light mb-2 ",type:"submit"},"Post"))):null,C?r.a.createElement(y,null):S?r.a.createElement(I,null):r.a.createElement("div",{className:"d-flex mt-2 justify-content-center"},r.a.createElement("h5",null,"This account is private")))},L=function(){return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,"Access Denied"))},q=function(){var e=Object(n.useContext)(j),t=e.friendRequests,a=e.acceptRequest,c=e.cancelRequest,s=e.friendRequestsLoading,l=e.getFriendRequests,i=Object(b.h)().username;return Object(n.useEffect)((function(){localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).username===i&&l(i)}),[]),r.a.createElement(r.a.Fragment,null,localStorage.getItem("jwt")?JSON.parse(localStorage.getItem("jwt")).username!==i?r.a.createElement(L,null):s?r.a.createElement(y,null):r.a.createElement("div",null,r.a.createElement("h3",{className:"mx-2 my-4 px-2 py-3"},"Friend Requests"),r.a.createElement("div",{className:"mx-5"},r.a.createElement("h5",null,"Recieved Friend Request"),t.received.length>0?t.received.map((function(e,t){return r.a.createElement("div",{key:t,className:"media mx-2 my-2 px-2 py-2 border rounded"},r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("img",{src:"/img/".concat(e.pic),className:"mr-3 img-thumbnail profile-pic"})),r.a.createElement("div",{className:"media-body w-100"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("h5",{className:"mt-0"},e.nickname))),r.a.createElement("div",{className:"ml-auto "},r.a.createElement("div",{className:"btn btn-light",onClick:function(){return a(e.username)}},"Accept"),r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){return c(e.username)}},"Cancel")))))})):r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,"You haven't received any friend requests yet.")),r.a.createElement("hr",null),r.a.createElement("h5",null,"Sent Friend Request"),t.sent.length>0?t.sent.map((function(e,t){return r.a.createElement("div",{key:t,className:"media mx-2 my-2 px-2 py-2 border rounded"},r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("img",{src:"/img/".concat(e.pic),className:"mr-3 img-thumbnail profile-pic"})),r.a.createElement("div",{className:"media-body w-100"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("h5",{className:"mt-0"},e.nickname),r.a.createElement("h5",{className:"mt-0 text-muted"},"@",e.username))),r.a.createElement("div",{className:"ml-auto "},r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){return c(e.username)}},"Cancel")))))})):r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,"You haven't sent any friend requests yet.")))):r.a.createElement(L,null))},J=function(){var e=Object(n.useContext)(j),t=e.friends,a=e.getFriends,c=e.friendsLoading,s=e.unFriend,l=e.cancelRequest,i=e.acceptRequest,o=e.sentRequest,m=Object(b.h)().username;return Object(n.useEffect)((function(){a(m)}),[]),r.a.createElement(r.a.Fragment,null,c?r.a.createElement(y,null):r.a.createElement("div",null,r.a.createElement("h3",{className:"mx-2 my-4 px-2 py-3"},"Friends"),0===t.length?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,"No friend")):t.map((function(e,t){return r.a.createElement("div",{key:t,className:"media mx-2 my-2 px-2 py-2 border rounded"},r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("img",{src:"/img/".concat(e.pic),className:"mr-3 img-thumbnail profile-pic"})),r.a.createElement("div",{className:"media-body w-100"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("h5",{className:"mt-0"},e.nickname),r.a.createElement("h5",{className:"mt-0 text-muted"},"@",e.username))),r.a.createElement("div",{className:"ml-auto mr-2"},localStorage.getItem("jwt")?r.a.createElement(r.a.Fragment,null,e.isFriend?r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){s(e.username)}},"Unfriend"):e.isSent?r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){l(e.username)}},"Cancel Request"):e.isReceived?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){i(e.username)}},"Accept Request"),r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){l(e.username)}},"Reject Request")):e.username!==JSON.parse(localStorage.getItem("jwt")).username?r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){o(e.username)}},"Add Friend"):null):null))))}))))},T=function(){var e=Object(n.useContext)(j),t=e.msg,a=e.setMsg,c=e.error,s=e.setError,l=e.editPassword,i=e.editNickname,o=e.editBio,p=e.editPublicity,g=e.editPic,h=e.profile,E=e.profileLoading,v=Object(b.h)().username,x=Object(n.useState)(""),N=Object(d.a)(x,2),O=N[0],k=N[1],w=Object(n.useState)(""),S=Object(d.a)(w,2),C=S[0],I=S[1],F=Object(n.useState)(""),q=Object(d.a)(F,2),J=q[0],T=q[1],R=Object(n.useState)(""),P=Object(d.a)(R,2),z=P[0],D=P[1],B=Object(n.useState)(""),A=Object(d.a)(B,2),M=A[0],_=A[1],U=Object(n.useState)(""),Y=Object(d.a)(U,2),H=Y[0],V=Y[1],Q=Object(n.useState)(""),G=Object(d.a)(Q,2),W=G[0],K=G[1],X=Object(n.useState)(""),Z=Object(d.a)(X,2),$=Z[0],ee=Z[1],te=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V("password"),a(""),s(""),t.preventDefault(),O&&0!==O.trim().length||C&&0!==C.trim().length){e.next=8;break}s("Please enter the field"),e.next=14;break;case 8:if(O!==C){e.next=12;break}s("Please enter a new password"),e.next=14;break;case 12:return e.next=14,l({password:O,newPassword:C});case 14:k(""),I("");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V("nickname"),a(""),s(""),t.preventDefault(),z&&0!==z.trim().length){e.next=8;break}s("Please enter the field"),e.next=10;break;case 8:return e.next=10,i(z);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V("bio"),a(""),s(""),t.preventDefault(),J&&0!==J.trim().length){e.next=8;break}s("Please enter the field"),e.next=10;break;case 8:return e.next=10,o(J);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V("publicity"),a(""),s(""),t.preventDefault(),M&&0!==M.trim().length){e.next=8;break}s("Please choose an option"),e.next=10;break;case 8:return e.next=10,p(M);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V("pic"),a(""),s(""),t.preventDefault(),W&&0!==W.trim().length){e.next=8;break}s("Please choose a photo"),e.next=12;break;case 8:return e.next=10,g(W);case 10:K(""),ee("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files[0]){e.next=2;break}return e.abrupt("return");case 2:return ee(t.target.files[0]),(a=new FormData).append("image",t.target.files[0]),n={headers:{"Content-Type":"application/x-www-form-urlencoded"}},e.next=8,f.a.post("/upload/image",a,n);case 8:(r=e.sent).data.success&&K(r.data.image);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,localStorage.getItem("jwt")?JSON.parse(localStorage.getItem("jwt")).username!==v?r.a.createElement(L,null):E?r.a.createElement(y,null):r.a.createElement("div",null,r.a.createElement("h3",{className:"mx-2 my-4 px-2 py-3"},"Account Setting"),r.a.createElement("form",{className:"mx-3 px-2 py-2 border rounded",onSubmit:function(e){te(e)}},"password"===H?r.a.createElement(r.a.Fragment,null,c?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},c):null,t?r.a.createElement("div",{className:"alert alert-success",role:"alert"},t):null):null,r.a.createElement("h4",{className:"my-2"},"Change Password"),r.a.createElement("h5",null,"Old password:"),r.a.createElement("input",{className:"form-control my-2",type:"password",value:O,onChange:function(e){k(e.target.value)}}),r.a.createElement("h5",null,"New password:"),r.a.createElement("input",{className:"form-control my-2",type:"password",value:C,onChange:function(e){I(e.target.value)}}),r.a.createElement("button",{className:"btn btn-light my-2",type:"submit"},"Change Password")),r.a.createElement("form",{className:"mx-3 my-4 px-2 py-3 border rounded",onSubmit:function(e){ce(e)}},"pic"===H?r.a.createElement(r.a.Fragment,null,c?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},c):null,t?r.a.createElement("div",{className:"alert alert-success",role:"alert"},t):null):null,r.a.createElement("h4",{className:"my-2"},"Choose your pic"),W?r.a.createElement("div",{className:"preview"},r.a.createElement("img",{src:"/img/".concat(W),className:"mr-3 img-thumbnail profile-pic"})):null,r.a.createElement("div",null,r.a.createElement("div",{className:"custom-file my-2"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",accept:".jpg,.png,.svg,.gif",onChange:function(e){se(e)}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},r.a.createElement("span",{className:"material-icons align-middle"}," add_photo_alternate")," ",$.name)),r.a.createElement("button",{className:"btn btn-light my-2 ",type:"submit"},"Change Profile Pic"))),r.a.createElement("form",{className:"mx-3 my-4 px-2 py-3 border rounded",onSubmit:function(e){ne(e)}},"bio"===H?r.a.createElement(r.a.Fragment,null,c?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},c):null,t?r.a.createElement("div",{className:"alert alert-success",role:"alert"},t):null):null,r.a.createElement("h4",{className:"my-2"},"Edit Bio"),r.a.createElement("textarea",{className:"form-control mb-2 ",defaultValue:h.bio,onChange:function(e){return T(e.target.value)}}),r.a.createElement("button",{className:"btn btn-light my-2",type:"submit"},"Edit")),r.a.createElement("form",{className:"mx-3 my-4 px-2 py-3 border rounded",onSubmit:function(e){ae(e)}},"nickname"===H?r.a.createElement(r.a.Fragment,null,c?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},c):null,t?r.a.createElement("div",{className:"alert alert-success",role:"alert"},t):null):null,r.a.createElement("h4",{className:"my-2"},"Change your Name"),r.a.createElement("input",{className:"form-control my-2",defaultValue:h.nickname,onChange:function(e){return D(e.target.value)},type:"text"}),r.a.createElement("button",{className:"btn btn-light my-2",type:"submit"},"Change Name")),r.a.createElement("form",{className:"mx-3 my-4 px-2 py-3 border rounded",onSubmit:function(e){re(e)}},"publicity"===H?r.a.createElement(r.a.Fragment,null,c?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},c):null,t?r.a.createElement("div",{className:"alert alert-success",role:"alert"},t):null):null,r.a.createElement("h4",{className:"my-2"},"Change Publicity"),r.a.createElement("select",{className:"form-control my-2",id:"publicity",defaultValue:h.publicity,onChange:function(e){_(e.target[e.target.selectedIndex].value)}},r.a.createElement("option",{value:"public"},"Public"),r.a.createElement("option",{value:"private"},"Private")),r.a.createElement("button",{className:"btn btn-light my-2",type:"submit"},"Change Publicity"))):r.a.createElement(L,null))},R=a(8),P=function(){var e=Object(n.useContext)(j),t=e.getProfile,a=e.profile,c=e.profileLoading,s=Object(n.useContext)(E).isLogin,l=Object(b.h)().username;Object(n.useEffect)((function(){t(l)}),[l,s]);var i=Object(b.i)();return r.a.createElement(r.a.Fragment,null,c?null:a.username?r.a.createElement("div",{className:"profile"},r.a.createElement(R.a,null,r.a.createElement(N,null),r.a.createElement("div",{className:"d-flex ml-2"},r.a.createElement(R.b,{to:"".concat(i.url,"/posts")},r.a.createElement("div",{className:"btn btn-light"},"Posts")),r.a.createElement(R.b,{to:"".concat(i.url,"/friends")},r.a.createElement("div",{className:"btn btn-light"},"Friends ",a.numOfFriends)),localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).username===l?r.a.createElement(R.b,{to:"".concat(i.url,"/requests")},r.a.createElement("div",{className:"btn btn-light"},"Friend Requests")):null,localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).username===l?r.a.createElement(R.b,{to:"".concat(i.url,"/setting")},r.a.createElement("div",{className:"btn btn-light"},"Account Setting")):null),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"".concat(i.path,"/posts"),exact:!0,component:F})," />",r.a.createElement(b.b,{path:"".concat(i.path,"/friends"),exact:!0,component:J})," />",r.a.createElement(b.b,{path:"".concat(i.path,"/requests"),exact:!0,component:q})," />",r.a.createElement(b.b,{path:"".concat(i.path,"/setting"),exact:!0,component:T})," />",r.a.createElement(b.a,{exact:!0,from:"".concat(i.path,"/"),to:"".concat(i.path,"/posts")})))):r.a.createElement("page404",null))},z=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(d.a)(s,2),i=l[0],o=l[1],p=Object(n.useState)(""),g=Object(d.a)(p,2),h=g[0],v=g[1],j=Object(n.useContext)(O),x=j.addPost,y=(j.postLoading,j.getFeed),N=Object(n.useContext)(E),k=N.info,w=N.infoLoading,S=(Object(b.g)(),function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a&&a.trim().length>0||i||i.trim().length>0)){e.next=9;break}return e.next=4,x(a,i);case 4:c(""),o(""),v(""),e.next=10;break;case 9:c("");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=function(){var e=Object(u.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files[0]){e.next=2;break}return e.abrupt("return");case 2:return v(t.target.files[0]),(a=new FormData).append("image",t.target.files[0]),n={headers:{"Content-Type":"application/x-www-form-urlencoded"}},e.next=8,f.a.post("/upload/image",a,n);case 8:(r=e.sent).data.success&&o(r.data.image);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){y()}),[]),r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,w?null:r.a.createElement("div",{className:"media mt-2 ml-3 mr-2"},r.a.createElement("a",{href:"/profile/".concat(k.username)},r.a.createElement("img",{src:"/img/".concat(k.pic),className:"mr-3 img-thumbnail profile-pic"})),r.a.createElement("form",{className:" media-body w-100",onSubmit:function(e){S(e)}},r.a.createElement("textarea",{className:"form-control mb-2 ",value:a,onChange:function(e){return c(e.target.value)},placeholder:"Hello ".concat(JSON.parse(localStorage.getItem("jwt")).nickname,", how are you today?")}),i?r.a.createElement("div",{className:"preview"},r.a.createElement("img",{src:"/img/".concat(i),className:"mr-3 img-thumbnail profile-pic"})):null,r.a.createElement("div",{className:"custom-file my-2"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",accept:".jpg,.png,.svg,.gif",onChange:function(e){C(e)}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},r.a.createElement("span",{className:"material-icons align-middle"}," add_photo_alternate")," ",h.name)),r.a.createElement("button",{className:"btn btn-light mb-2",type:"submit"},"Post"))),r.a.createElement(I,null)))},D=a(127),B=function(e){var t=e.component,a=Object(D.a)(e,["component"]);return r.a.createElement(b.b,Object.assign({},a,{render:function(e){return localStorage.getItem("jwt")?r.a.createElement(t,e):r.a.createElement(b.a,{to:"/login"})}}))},A=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),l=Object(d.a)(s,2),i=l[0],o=l[1],p=Object(n.useState)(""),g=Object(d.a)(p,2),h=g[0],v=g[1],j=Object(n.useContext)(E),x=j.msg,y=j.setMsg,N=Object(b.g)();localStorage.getItem("jwt")&&N.push("/");var O=function(){var e=Object(u.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(""),v(""),n={headers:{"Content-Type":"application/json"}},e.next=6,f.a.post("/api/auth/login",JSON.stringify({email:a,password:i}),n);case 6:(r=e.sent).data.success?(localStorage.setItem("jwt",JSON.stringify({token:r.data.token,username:r.data.username,nickname:r.data.nickname,login:!0})),window.location.href="/"):(c(""),o(""),v(r.data.msg));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,h?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},h):null,x?r.a.createElement("div",{className:"alert alert-success",role:"alert"},x):null,r.a.createElement("form",{onSubmit:function(e){return O(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"email",value:a,onChange:function(e){return c(e.target.value)},className:"form-control",id:"email",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",value:i,onChange:function(e){return o(e.target.value)},className:"form-control",id:"password",required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Login"),r.a.createElement(R.b,{to:"/register"},r.a.createElement("button",{className:"btn btn-primary mr-2"},"Register"))))},M=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),l=Object(d.a)(s,2),i=l[0],o=l[1],p=Object(n.useState)(null),g=Object(d.a)(p,2),h=g[0],v=g[1],j=Object(n.useState)(null),x=Object(d.a)(j,2),y=x[0],N=x[1],O=Object(n.useState)("M"),k=Object(d.a)(O,2),w=k[0],S=k[1],C=Object(n.useState)(null),I=Object(d.a)(C,2),F=I[0],L=I[1],q=Object(n.useState)(!1),J=Object(d.a)(q,2),T=J[0],R=J[1],P=Object(n.useContext)(E).setMsg,z=Object(b.g)();localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")).login&&z.push("/home");var D=function(){var e=Object(u.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={headers:{"Content-Type":"application/json"}},e.next=4,f.a.post("/api/users/register",JSON.stringify({username:a,email:i,password:h,nickname:y,gender:w,birthday:F}),n);case 4:(r=e.sent).data.success?(v(""),R(!1),P("You can now login with your new account"),z.push("/login")):(v(""),R(r.data.msg));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,T?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},T):null,r.a.createElement("form",{onSubmit:function(e){D(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",onChange:function(e){return c(e.target.value)},className:"form-control",id:"username","aria-describedby":"usernameText",required:!0}),r.a.createElement("small",{id:"usernameText",className:"form-text text-muted"},"Your friends can find you with your username.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",onChange:function(e){return o(e.target.value)},className:"form-control",id:"email","aria-describedby":"emailText",required:!0}),r.a.createElement("small",{id:"emailText",className:"form-text text-muted"},"You can use your email to login.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",value:h,onChange:function(e){return v(e.target.value)},className:"form-control",id:"password",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nickName"},"Nick Name"),r.a.createElement("input",{type:"text",onChange:function(e){return N(e.target.value)},className:"form-control",id:"nickName",required:!0})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{htmlFor:"gender"},"Gender"),r.a.createElement("select",{class:"form-control",id:"gender",onChange:function(e){S(e.target[e.target.selectedIndex].value)},required:!0},r.a.createElement("option",{value:"M"},"Male"),r.a.createElement("option",{value:"F"},"Female"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"birthday"},"Birthday"),r.a.createElement("input",{type:"date",onChange:function(e){return L(e.target.value)},className:"form-control",id:"birthday",required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Register")))},_=function(){var e=Object(n.useContext)(E),t=e.results,a=e.resultsLoading,c=e.search,s=e.unFriend,l=e.cancelRequest,i=e.acceptRequest,o=e.sentRequest,m=Object(b.h)().query;return Object(n.useEffect)((function(){c(m)}),[m]),r.a.createElement(r.a.Fragment,null,a?r.a.createElement(y,null):r.a.createElement("div",null,r.a.createElement("h3",{className:"mx-2 my-4 px-2 py-3"},"Search Results"),0===t.length?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("h5",null,"No results")):t.map((function(e,t){return r.a.createElement("div",{key:t,className:"media mx-2 my-2 px-2 py-2 border rounded"},r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("img",{src:"/img/".concat(e.pic),className:"mr-3 img-thumbnail profile-pic"})),r.a.createElement("div",{className:"media-body w-100"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,r.a.createElement("a",{href:"/profile/".concat(e.username)},r.a.createElement("h5",{className:"mt-0"},e.nickname),r.a.createElement("h5",{className:"mt-0 text-muted"},"@",e.username))),r.a.createElement("div",{className:"ml-auto mr-2"},localStorage.getItem("jwt")?r.a.createElement(r.a.Fragment,null,e.isFriend?r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){s(e.username)}},"Unfriend"):e.isSent?r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){l(e.username)}},"Cancel Request"):e.isReceived?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){i(e.username)}},"Accept Request"),r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){l(e.username)}},"Reject Request")):e.username!==JSON.parse(localStorage.getItem("jwt")).username?r.a.createElement("div",{className:"btn btn-light ml-2",onClick:function(){o(e.username)}},"Add Friend"):null):null))))}))))},U=a(124);var Y=function(){var e=Object(n.useContext)(E),t=e.isLogin,a=e.setIsLogin,c=e.getInfo,s=e.info,l=e.logOut,i=e.setQuery,o=e.query,m=e.infoLoading;return Object(n.useEffect)((function(){localStorage.getItem("jwt")?a(!0):a(!1)}),[]),Object(n.useEffect)((function(){(t||localStorage.getItem("jwt"))&&c(JSON.parse(localStorage.getItem("jwt")).username)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null,r.a.createElement("title",null,"HOW's")),r.a.createElement(R.a,null,r.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),r.a.createElement("nav",{className:"navbar navbar-expand-lg fixed-top navbar-light bg-white shadow-sm"},r.a.createElement(R.b,{to:"/"},r.a.createElement("img",{className:"logo navbar-brand",src:"".concat("","/logo.jpg")})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},m?null:t?r.a.createElement("form",{className:"form-inline ml-auto my-1 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search",onChange:function(e){i(e.target.value)}}),r.a.createElement(R.b,{to:"/search/".concat(o)},r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit"},"Search"))):null,t?r.a.createElement("ul",{className:"navbar-nav ml-auto mr-4 mt-1"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("h5",{className:"nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},m?null:r.a.createElement("img",{src:"/img/".concat(s.pic),className:"mr-3 img-thumbnail profile-pic-xs"}),s.nickname),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown"},r.a.createElement("a",{className:"dropdown-item",href:"/profile/".concat(s.username)},"Profile"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("div",{className:"dropdown-item btn btn-light",onClick:function(){l()}},"LogOut")))):r.a.createElement("ul",{className:"navbar-nav ml-auto mr-4 mt-1"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/login",className:"nav-link"},"Login"))))),r.a.createElement("div",{className:"container-fluid bg-white",style:{marginTop:"6.5rem",width:"95%"}},r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/login",component:A}),r.a.createElement(b.b,{path:"/register",component:M}),r.a.createElement(B,{path:"/search/:query",component:_}),r.a.createElement(k,null,r.a.createElement(B,{path:"/",exact:!0,component:z}),r.a.createElement(x,null,r.a.createElement(b.b,{path:"/profile/:username",component:P})))))))};s.a.render(r.a.createElement(v,null,r.a.createElement(Y,null)),document.getElementById("root"))}},[[128,1,2]]]);
//# sourceMappingURL=main.efd942b5.chunk.js.map