{"version":3,"sources":["context/GlobalState.js","context/ProfileState.js","components/Loading.js","components/ProfileInfo.js","context/PostsState.js","components/Comment.js","components/Comments.js","components/Post.js","components/Posts.js","components/ProfilePosts.js","components/Denied.js","components/FriendRequests.js","components/Friends.js","components/ProfileSetting.js","components/Profile.js","components/Feed.js","components/AuthRoute.js","components/Login.js","components/Register.js","components/Search.js","App.js","index.js"],"names":["GlobalContext","createContext","GlobalProvider","children","useState","msg","setMsg","isLogin","setIsLogin","info","setInfo","infoLoading","setInfoLoading","query","setQuery","results","setResults","resultsLoading","setResultsLoading","username","a","checkToken","axios","get","res","data","success","pic","rows","nickname","logOut","localStorage","clear","getItem","token","JSON","parse","jwt","decode","complete","payload","exp","Date","now","conf","headers","setItem","stringify","login","post","tempResults","index","length","res2","res3","res4","isFriend","isSent","isReceived","findIndex","result","delete","Provider","value","getInfo","search","unFriend","cancelRequest","acceptRequest","sentRequest","ProfileContext","ProfileProvider","useHistory","profile","setProfile","friends","setFriends","friendRequests","setFriendRequests","profileLoading","setProfileLoading","friendsLoading","setFriendsLoading","friendRequestsLoading","setFriendRequestsLoading","error","setError","permission","setPermission","permissionLoading","setPermissionLoading","useContext","pro","bio","numOfFriends","publicity","isRequest","tempFriends","requests","received","sent","receivedReq","sentReq","tempReq","filter","rec","push","friend","tempPro","find","newContent","put","password","newPassword","console","log","getProfile","getFriends","getFriendRequests","editPassword","editNickname","editBio","editPublicity","editPic","getPermission","Loading","className","role","ProfileInfo","src","onClick","PostsContext","PostsProvider","posts","setPosts","likedBy","setLikedBy","postLoading","setPostLoading","likeListloading","setLikeListLoading","postToDelete","setPostToDelete","commentToDelete","setcommentToDelete","tempPosts","postid","resC","comments","hasLike","j","commentid","resC2","content","postPic","prev","i","editTime","numOfLikes","comment","getPosts","getFeed","addPost","editPost","deletePost","handlePostLike","getPostLikedBy","addComment","deleteComment","handleCommentLike","getCommentLikedBy","Comment","postUsername","href","postTime","style","data-toggle","data-target","Comments","map","key","Post","setComment","editMode","setEditMode","editContent","setEditContent","handleComment","e","preventDefault","trim","useEffect","handleEdit","onSubmit","onChange","target","type","placeholder","Posts","handleDelete","id","tabIndex","aria-labelledby","aria-hidden","data-dismiss","aria-label","like","ProfilePosts","setPic","selected","setSelected","setContent","useParams","handlePost","handleUpload","files","formData","FormData","append","image","accept","htmlFor","name","Denied","FriendRequests","req","Friends","ProfileSetting","setPassword","setNewPassword","setBio","setNickname","setPublicity","currentEdit","setCurrentEdit","handleChangePassword","handleChangeNickname","handleChangeBio","handleChangePublicity","handleChangePic","defaultValue","selectedIndex","Profile","match","useRouteMatch","to","url","path","exact","component","from","Feed","AuthRoute","Component","rest","render","props","Login","email","setEmail","history","handleLogin","window","location","required","Register","setUsername","gender","setGender","birthday","setBirthday","handleRegister","aria-describedby","class","Search","App","Helmet","rel","process","aria-controls","aria-expanded","aria-haspopup","marginTop","width","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.efd942b5.chunk.js","sourcesContent":["import React, { createContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport jwt from 'jsonwebtoken';\r\n\r\nexport const GlobalContext = createContext();\r\n\r\nexport const GlobalProvider = ({ children })=> {\r\n    const [msg, setMsg] = useState(\"\");\r\n    const [isLogin, setIsLogin] = useState(false);\r\n    const [info, setInfo] = useState({});\r\n    const [infoLoading, setInfoLoading] = useState(true);\r\n    const [query, setQuery] = useState(\"\");\r\n    const [results, setResults] = useState([]);\r\n    const [resultsLoading, setResultsLoading] = useState(true);\r\n\r\n    async function getInfo(username){  \r\n        await checkToken();\r\n        const res = await axios.get(\"/api/users/\" + username);  \r\n        if(res.data.success){            \r\n            let info = {       \r\n                pic: res.data.rows[0].pic,\r\n                username: res.data.rows[0].username,                \r\n                nickname: res.data.rows[0].nickname\r\n            } \r\n            setIsLogin(true);\r\n            setInfo(info);\r\n            setInfoLoading(false);\r\n        }\r\n    }\r\n\r\n    async function logOut(){    \r\n        setIsLogin(false);\r\n        localStorage.clear();     \r\n        const res = await axios.get(`/api/auth/logout`);    \r\n    }\r\n    \r\n    async function checkToken(){\r\n        if(!localStorage.getItem(\"jwt\"))return;\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const decoded = jwt.decode(JSON.parse(localStorage.getItem(\"jwt\")).token, {complete: true});\r\n        if(decoded.payload.exp <= (Date.now()/1000 + 60)){\r\n            const conf = {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"authorization\": token\r\n                }\r\n            };   \r\n            const res = await axios.get(`/api/auth/refreshToken`,conf);        \r\n            \r\n            if(res.data.success){            \r\n                localStorage.setItem(\"jwt\",JSON.stringify({\r\n                    token:res.data.token,\r\n                    username: res.data.username,   \r\n                    nickname: res.data.nickname,               \r\n                    login:true\r\n                }));\r\n            }else{\r\n                logOut();\r\n            }\r\n        }\r\n    }\r\n    async function search(query){\r\n        setResultsLoading(true);\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n            const conf = {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"authorization\": token\r\n                }\r\n            };   \r\n        const res = await axios.post(`/api/search`,\r\n        JSON.stringify({\r\n            query: query\r\n        }),\r\n        conf\r\n    );   \r\n    if(res.data.success){\r\n        let tempResults=res.data.results;\r\n        if(localStorage.getItem(\"jwt\")){\r\n            for (let index = 0; index < tempResults.length; index++) {\r\n                const res2 = await axios.get(`/api/friends/${tempResults[index].username}/isFriend`,conf);   \r\n                const res3 = await axios.get(`/api/friends/${tempResults[index].username}/isSentRequest`,conf);  \r\n                const res4 = await axios.get(`/api/friends/${tempResults[index].username}/isReceivedRequest`,conf);  \r\n                if(res2.data.success && res3.data.success) {\r\n                    tempResults[index].isFriend = res2.data.isFriend;\r\n                    tempResults[index].isSent = res3.data.isSent;\r\n                    tempResults[index].isReceived = res4.data.isReceived;\r\n                }\r\n            }\r\n        }\r\n        setResults(tempResults);\r\n        setResultsLoading(false);\r\n    }\r\n        \r\n    }\r\n\r\n    async function acceptRequest(username){    \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.get(`/api/friends/request/${username}`,conf);\r\n        \r\n        if(res.data.success){\r\n            let tempResults = [...results];\r\n            let index = tempResults.findIndex(result=>result.username===username);\r\n            tempResults[index].isFriend = true;\r\n            setResults(tempResults);\r\n        }\r\n    }\r\n\r\n    async function cancelRequest(username){        \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.delete(`/api/friends/request/${username}`,conf);\r\n        \r\n        if(res.data.success){      \r\n            let tempResults = [...results];\r\n            let index = tempResults.findIndex(result=>result.username===username);\r\n            tempResults[index].isReceived = false;\r\n            tempResults[index].isSent = false;\r\n            setResults(tempResults);            \r\n        }\r\n    }\r\n\r\n    async function unFriend(username){        \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.delete(`/api/friends/${username}`,conf);\r\n        \r\n        if(res.data.success){      \r\n            let tempResults = [...results];\r\n            let index = tempResults.findIndex(result=>result.username===username);\r\n            tempResults[index].isFriend = false;\r\n            setResults(tempResults);            \r\n        }\r\n    }\r\n\r\n    async function sentRequest(username){        \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.get(`/api/friends/request/send/${username}`,conf);\r\n        \r\n        if(res.data.success){\r\n            let tempResults = [...results];\r\n            let index = tempResults.findIndex(result=>result.username===username);\r\n            tempResults[index].isSent = true;\r\n            setResults(tempResults);  \r\n        }\r\n    }\r\n\r\n    return (<GlobalContext.Provider value={{      \r\n        isLogin,\r\n        setIsLogin,  \r\n        logOut,\r\n        checkToken,\r\n        msg,\r\n        setMsg,\r\n        getInfo,\r\n        info,\r\n        search,\r\n        results,\r\n        resultsLoading,\r\n        query, \r\n        setQuery,\r\n        unFriend,\r\n        cancelRequest,\r\n        acceptRequest,\r\n        sentRequest,\r\n        setInfo,\r\n        infoLoading\r\n    }}>\r\n        {children}\r\n    </GlobalContext.Provider>);\r\n}","import React, { createContext, useState, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport  { useHistory } from 'react-router-dom';\r\nimport { GlobalContext } from './GlobalState';\r\n\r\nexport const ProfileContext = createContext();\r\n\r\nexport const ProfileProvider = ({ children })=> {\r\n    let history = useHistory();\r\n    const [profile, setProfile] = useState({});\r\n    const [friends, setFriends] = useState([]);\r\n    const [friendRequests, setFriendRequests] = useState({});\r\n    const [profileLoading, setProfileLoading] = useState(true);\r\n    const [friendsLoading, setFriendsLoading] = useState(true);\r\n    const [friendRequestsLoading, setFriendRequestsLoading] = useState(true);\r\n    const [msg, setMsg] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [permission, setPermission] = useState(false); \r\n    const [permissionLoading, setPermissionLoading] = useState(true);\r\n\r\n    const {checkToken,info,setInfo} = useContext(GlobalContext); \r\n\r\n    async function getProfile(username){  \r\n        await checkToken();\r\n        const res = await axios.get(\"/api/users/\" + username);  \r\n        if(res.data.success){            \r\n            let pro = {                \r\n                username: res.data.rows[0].username,\r\n                //email: res.data.rows[0].email,\r\n                nickname: res.data.rows[0].nickname,\r\n                //gender: res.data.rows[0].gender,\r\n                //birthday: res.data.rows[0].birthday,\r\n                bio: res.data.rows[0].bio,\r\n                numOfFriends: res.data.rows[0].numOfFriends,\r\n                publicity: res.data.rows[0].publicity,\r\n                pic:res.data.rows[0].pic\r\n            } \r\n            if(localStorage.getItem(\"jwt\")){\r\n                if(JSON.parse(localStorage.getItem(\"jwt\")).username !== username){\r\n                    const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n                    const conf = {\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            \"authorization\": token\r\n                        }\r\n                    };\r\n                    const res2 = await axios.get(`/api/friends/${username}/isFriend`,conf);   \r\n                    const res3 = await axios.get(`/api/friends/${username}/isSentRequest`,conf);  \r\n                    const res4 = await axios.get(`/api/friends/${username}/isReceivedRequest`,conf); \r\n                    pro.isFriend = res2.data.isFriend;\r\n                    pro.isSent = res3.data.isSent;\r\n                    pro.isReceived = res4.data.isReceived;\r\n                }else{\r\n                    pro.isFriend = false\r\n                    pro.isRequest = false;\r\n                }\r\n            }\r\n            if((localStorage.getItem(\"jwt\")&&JSON.parse(localStorage.getItem(\"jwt\")).username === username)||pro.publicity===\"public\"){\r\n                setPermission(true);\r\n              \r\n            }else            \r\n            if(localStorage.getItem(\"jwt\")){\r\n                const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n                const conf = {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"authorization\": token\r\n                    }                        \r\n                };\r\n                const res2 = await axios.get(`/api/friends/${username}/isFriend`,conf );\r\n                if(res2.data.success){\r\n                    setPermission(res2.data.isFriend);  \r\n                }   \r\n            }\r\n            setProfile(pro);  \r\n            setProfileLoading(false);\r\n            setPermissionLoading(false);  \r\n            \r\n        } \r\n        \r\n    }\r\n    \r\n    async function getFriends(username){\r\n        await checkToken();\r\n        const res = await axios.get(`/api/friends/${username}`);   \r\n           \r\n        if(res.data.success){\r\n            let tempFriends=res.data.friends;\r\n            if(localStorage.getItem(\"jwt\")){\r\n                const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n                const conf = {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"authorization\": token\r\n                    }\r\n                };   \r\n                for (let index = 0; index < tempFriends.length; index++) {\r\n                    const res2 = await axios.get(`/api/friends/${tempFriends[index].username}/isFriend`,conf);   \r\n                    const res3 = await axios.get(`/api/friends/${tempFriends[index].username}/isSentRequest`,conf);  \r\n                    const res4 = await axios.get(`/api/friends/${tempFriends[index].username}/isReceivedRequest`,conf);  \r\n                    if(res2.data.success && res3.data.success) {\r\n                        tempFriends[index].isFriend = res2.data.isFriend;\r\n                        tempFriends[index].isSent = res3.data.isSent;\r\n                        tempFriends[index].isReceived = res4.data.isReceived;\r\n                    }\r\n                }\r\n            }\r\n\r\n            setFriends(tempFriends);\r\n            setFriendsLoading(false);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n\r\n    async function getFriendRequests(username){\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        let requests = {received:[],sent:[]};\r\n        const res = await axios.get(`/api/friends/request/received/${username}`,conf);\r\n        if(res.data.success){\r\n            const res2 = await axios.get(`/api/friends/request/sent/${username}`,conf);\r\n            if(res2.data.success){\r\n                requests.received = res.data.receivedReq;\r\n                requests.sent = res2.data.sentReq;\r\n                setFriendRequests(requests);\r\n                setFriendRequestsLoading(false);\r\n            }\r\n            \r\n        }\r\n        \r\n        \r\n\r\n    }\r\n\r\n    async function acceptRequest(username){    \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.get(`/api/friends/request/${username}`,conf);\r\n        \r\n        if(res.data.success){\r\n            let tempFriends = [...friends];\r\n            if(profile.username===JSON.parse(localStorage.getItem(\"jwt\")).username){\r\n                let tempReq = {...friendRequests};\r\n                tempReq.received = tempReq.received.filter(rec=>rec.username!==username);\r\n                setFriendRequests(tempReq);\r\n\r\n                \r\n                tempFriends.push(res.data.friend);\r\n                setFriends(tempFriends);\r\n                \r\n                let tempPro = {...profile};\r\n                tempPro.numOfFriends += 1;\r\n                setProfile(tempPro);\r\n\r\n            }else if(tempFriends.find(friend=>friend.username===username)){\r\n                let tempFriends = [...friends];\r\n                let index = tempFriends.findIndex(friend=>friend.username===username);\r\n                tempFriends[index].isFriend = true;\r\n                setFriends(tempFriends);\r\n            }else{\r\n                let tempPro = {...profile};\r\n                tempPro.isFriend = true;\r\n                setProfile(tempPro);\r\n            }\r\n        }\r\n    }\r\n\r\n    async function cancelRequest(username){        \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.delete(`/api/friends/request/${username}`,conf);\r\n        \r\n        if(res.data.success){      \r\n            let tempFriends = [...friends];     \r\n            if(profile.username===JSON.parse(localStorage.getItem(\"jwt\")).username){\r\n                let tempReq = {...friendRequests};            \r\n                if(tempReq.received.find(rec=>rec.username===username)){\r\n                    tempReq.received = tempReq.received.filter(rec=>rec.username!==username);\r\n                }else if(tempReq.sent.find(rec=>rec.username===username)){\r\n                    tempReq.sent = tempReq.sent.filter(rec=>rec.username!==username);\r\n                }\r\n                \r\n                setFriendRequests(tempReq);\r\n            }else if(tempFriends.find(friend=>friend.username===username)){\r\n                let index = tempFriends.findIndex(friend=>friend.username===username);\r\n                tempFriends[index].isReceived = false;\r\n                tempFriends[index].isSent = false;\r\n                setFriends(tempFriends);\r\n            }else{\r\n                let tempPro = {...profile};\r\n                tempPro.isReceived = false;\r\n                tempPro.isSent = false;\r\n                setProfile(tempPro);\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    async function unFriend(username){        \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.delete(`/api/friends/${username}`,conf);\r\n        \r\n        if(res.data.success){      \r\n            let tempFriends = [...friends];\r\n            if(profile.username===JSON.parse(localStorage.getItem(\"jwt\")).username){\r\n                let tempFriends = [...friends];\r\n                tempFriends = tempFriends.filter(friend=>friend.username!==username);\r\n                setFriends(tempFriends);\r\n                let tempPro = {...profile};\r\n                tempPro.numOfFriends -= 1;\r\n                setProfile(tempPro);\r\n            }else if(tempFriends.find(friend=>friend.username===username)){    \r\n                let index = tempFriends.findIndex(friend=>friend.username===username);\r\n                tempFriends[index].isFriend = false;\r\n                setFriends(tempFriends);\r\n            }else{\r\n                let tempPro = {...profile};\r\n                tempPro.isFriend = false;\r\n                setProfile(tempPro);\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    async function sentRequest(username){        \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.get(`/api/friends/request/send/${username}`,conf);\r\n        \r\n        if(res.data.success){\r\n            let tempFriends = [...friends];\r\n            if(tempFriends.find(friend=>friend.username===username)){\r\n                let index = tempFriends.findIndex(friend=>friend.username===username);\r\n                tempFriends[index].isSent = true;\r\n                setFriends(tempFriends);\r\n            }else{\r\n                let tempPro = {...profile};\r\n                tempPro.isSent = true;\r\n                setProfile(tempPro);\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    async function editPassword(newContent) {\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.put(`/api/users/edit/password`,\r\n            JSON.stringify({\r\n                password: newContent.password,\r\n                newPassword: newContent.newPassword\r\n            }),\r\n            conf\r\n        );\r\n        if(res.data.success){\r\n            setMsg(res.data.msg);\r\n        }else{\r\n            setError(res.data.msg);\r\n        }\r\n    }\r\n\r\n    async function editNickname(newContent) {\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.put(`/api/users/edit/nickname`,\r\n            JSON.stringify({\r\n                nickname: newContent\r\n            }),\r\n            conf\r\n        );\r\n        if(res.data.success){\r\n            setMsg(res.data.msg);\r\n            let tempPro = {...profile};\r\n            tempPro.nickname = newContent;\r\n            setProfile(tempPro);\r\n            let tempInfo = {...info};\r\n            tempInfo.nickname = newContent;\r\n            setInfo(tempPro);\r\n        }else{\r\n            setError(res.data.msg);\r\n        }\r\n    }\r\n    async function editBio(newContent) {\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.put(`/api/users/edit/bio`,\r\n            JSON.stringify({\r\n                bio: newContent\r\n            }),\r\n            conf\r\n        );\r\n        if(res.data.success){\r\n            setMsg(res.data.msg);\r\n            let tempPro = {...profile};\r\n            tempPro.bio = newContent;\r\n            setProfile(tempPro);\r\n        }else{\r\n            setError(res.data.msg);\r\n        }\r\n    }\r\n\r\n    async function editPublicity(newContent) {\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.put(`/api/users/edit/publicity`,\r\n            JSON.stringify({\r\n                publicity: newContent\r\n            }),\r\n            conf\r\n        );\r\n        if(res.data.success){\r\n            setMsg(res.data.msg);\r\n            let tempPro = {...profile};\r\n            tempPro.publicity = newContent;\r\n            setProfile(tempPro);\r\n        }else{\r\n            setError(res.data.msg);\r\n        }\r\n    }\r\n\r\n    async function editPic(newContent) {\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.put(`/api/users/edit/pic`,\r\n            JSON.stringify({\r\n                pic: newContent\r\n            }),\r\n            conf\r\n        );\r\n        console.log(res)\r\n        if(res.data.success){\r\n            setMsg(res.data.msg);\r\n            let tempPro = {...profile};\r\n            tempPro.pic = newContent;\r\n            setProfile(tempPro);\r\n            let tempInfo = {...info};\r\n            tempInfo.pic = newContent;\r\n            setInfo(tempPro);\r\n        }else{\r\n            setError(res.data.msg);\r\n        }\r\n    }\r\n\r\n    async function getPermission(username) {\r\n        await checkToken();    \r\n        if(localStorage.getItem(\"jwt\")&&JSON.parse(localStorage.getItem(\"jwt\")).username === username){\r\n            setPermission(true);\r\n            return setPermissionLoading(false);\r\n        }   \r\n        if(profile.publicity){\r\n            setPermission(true);\r\n            return setPermissionLoading(false);\r\n        }\r\n                \r\n        if(localStorage.getItem(\"jwt\")){\r\n            const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n            const conf = {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"authorization\": token\r\n                }                        \r\n            };\r\n            const res2 = await axios.get(`/api/friends/${username}/isFriend`,conf );\r\n            if(res2.data.success){\r\n                setPermission(res2.data.isFriend);  \r\n                return setPermissionLoading(false);  \r\n            }   \r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    return (<ProfileContext.Provider value={{        \r\n        profile,\r\n        friends,\r\n        profileLoading,\r\n        friendsLoading,\r\n        getProfile,\r\n        getFriends,\r\n        getFriendRequests,\r\n        friendRequests,\r\n        friendRequestsLoading,\r\n        acceptRequest,\r\n        cancelRequest,\r\n        unFriend,\r\n        sentRequest,\r\n        editPassword,\r\n        editNickname,\r\n        editBio,\r\n        editPublicity,\r\n        editPic,\r\n        msg,\r\n        setMsg, \r\n        error, \r\n        setError,\r\n        getPermission,\r\n        permission,\r\n        permissionLoading\r\n    }}>\r\n        {children}\r\n    </ProfileContext.Provider>);\r\n}","import React from 'react'\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <div className=\"d-flex justify-content-center mt-3\">\r\n            <div className=\"spinner-grow text-secondary\" role=\"status\">\r\n                <span className=\"sr-only\">Loading...</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport  { useHistory,useParams } from 'react-router-dom';\r\nimport { ProfileContext } from '../context/ProfileState'\r\nimport Loading from './Loading';\r\n\r\nconst ProfileInfo = ()=> {  \r\n    const {profile,unFriend,cancelRequest,acceptRequest,sentRequest, profileLoading} = useContext(ProfileContext);\r\n    \r\n    return (\r\n        \r\n        \r\n            <div className=\"card mb-2\">\r\n            <div className=\"d-flex\">\r\n            {   profileLoading?null:\r\n               <div className=\"card-body\">\r\n                    <img src={`/img/${profile.pic}`} className=\"mr-3 img-thumbnail profile-pic-lg\"  />\r\n                   <div><h3>{profile.nickname}</h3></div>           \r\n                   <div> <h5 className=\"text-muted\">@{profile.username}</h5></div>\r\n                   <div><h5> {profile.bio}</h5></div>  \r\n               </div>\r\n            }\r\n               <div className=\"ml-auto mt-auto mr-3 mb-3 \">\r\n                   {\r\n                       !localStorage.getItem(\"jwt\")?null:\r\n                       <>\r\n                           {   profileLoading?null:\r\n                               profile.isFriend?\r\n                               <div className=\"btn btn-light ml-2\" onClick={()=>{unFriend(profile.username)}}>Unfriend</div>:\r\n                               profile.isSent?\r\n                               <div className=\"btn btn-light ml-2\" onClick={()=>{cancelRequest(profile.username)}}>Cancel Request</div>:\r\n                               profile.isReceived?\r\n                               <>\r\n                               <div className=\"btn btn-light ml-2\" onClick={()=>{acceptRequest(profile.username)}}>Accept Request</div>\r\n                               <div className=\"btn btn-light ml-2\" onClick={()=>{cancelRequest(profile.username)}}>Reject Request</div>\r\n                               </>:\r\n                               profile.username!==JSON.parse(localStorage.getItem(\"jwt\")).username?\r\n                               <div className=\"btn btn-light ml-2\" onClick={()=>{sentRequest(profile.username)}}>Add Friend</div>\r\n                               :\r\n                               null\r\n\r\n                           }\r\n                       </>\r\n                   }\r\n               </div>\r\n            </div>\r\n           \r\n       </div>  \r\n     \r\n              \r\n    );\r\n}\r\n\r\nexport default ProfileInfo;\r\n","import React, { createContext, useState,useContext } from 'react';\r\nimport axios from 'axios';\r\nimport jwt from 'jsonwebtoken';\r\nimport  { useHistory } from 'react-router-dom';\r\nimport { GlobalContext } from '../context/GlobalState';\r\n\r\nexport const PostsContext = createContext();\r\n\r\nexport const PostsProvider = ({ children })=> {\r\n    const [posts, setPosts] = useState([]);  \r\n    const [likedBy, setLikedBy] = useState([]);\r\n    const [postLoading, setPostLoading] = useState(true);\r\n    const [likeListloading, setLikeListLoading] = useState(true);\r\n    const [postToDelete, setPostToDelete] = useState(null);   \r\n    const [commentToDelete, setcommentToDelete] = useState(null);\r\n    const {checkToken} = useContext(GlobalContext);\r\n    \r\n\r\n    /** post */\r\n    //done\r\n    async function getPosts(username){  \r\n        await checkToken();\r\n        const res = await axios.get(\"/api/posts/\" + username);   \r\n        if(res.data.success){\r\n            let tempPosts = res.data.posts;\r\n            for (let index = 0; index < tempPosts.length; index++) {            \r\n                const resC = await axios.get(`/api/comments/${tempPosts[index].postid}`);        \r\n                if(resC.data.success){\r\n                    tempPosts[index].comments = resC.data.comments;\r\n                } \r\n            }\r\n            if(localStorage.getItem(\"jwt\")){\r\n                const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n                const conf = {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"authorization\": token\r\n                    }\r\n                };\r\n                for (let index = 0; index < tempPosts.length; index++) {            \r\n                    const res2 = await axios.get(`/api/posts/${tempPosts[index].postid}/hasLike`,conf);        \r\n                    if(res2.data.success){\r\n                        tempPosts[index].hasLike = res2.data.hasLike;\r\n                    }\r\n                    for (let j = 0; j < tempPosts[index].comments.length; j++) {\r\n                        const resC2 = await axios.get(`/api/comments/${tempPosts[index].comments[j].commentid}/hasLike`,conf);        \r\n                        if(resC2.data.success){\r\n                            tempPosts[index].comments[j].hasLike = resC2.data.hasLike;\r\n                        }\r\n                        \r\n                    }\r\n                    \r\n                }\r\n            }        \r\n            setPosts(tempPosts);\r\n            setPostLoading(false);\r\n        }\r\n    }\r\n    async function getFeed(){  \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n                const conf = {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"authorization\": token\r\n                    }\r\n                };\r\n        const res = await axios.get(\"/api/feed\",conf);  \r\n        if(res.data.success){            \r\n            let tempPosts = res.data.posts;\r\n            \r\n            for (let index = 0; index < tempPosts.length; index++) {            \r\n                const resC = await axios.get(`/api/comments/${tempPosts[index].postid}`);        \r\n                if(resC.data.success){\r\n                    tempPosts[index].comments = resC.data.comments;\r\n                } \r\n            }\r\n            if(localStorage.getItem(\"jwt\")){\r\n                const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n                const conf = {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"authorization\": token\r\n                    }\r\n                };\r\n                for (let index = 0; index < tempPosts.length; index++) {            \r\n                    const res2 = await axios.get(`/api/posts/${tempPosts[index].postid}/hasLike`,conf);        \r\n                    if(res2.data.success){\r\n                        tempPosts[index].hasLike = res2.data.hasLike;\r\n                    }\r\n                    for (let j = 0; j < tempPosts[index].comments.length; j++) {\r\n                        const resC2 = await axios.get(`/api/comments/${tempPosts[index].comments[j].commentid}/hasLike`,conf);        \r\n                        if(resC2.data.success){\r\n                            tempPosts[index].comments[j].hasLike = resC2.data.hasLike;\r\n                        }\r\n                        \r\n                    }\r\n                    \r\n                }\r\n            }        \r\n            setPosts(tempPosts);\r\n            setPostLoading(false);\r\n        }\r\n    }\r\n\r\n    async function addPost(content,postPic) {\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.post(\"/api/posts\",\r\n            JSON.stringify({\r\n                content: content,\r\n                postPic:postPic\r\n            }),\r\n            conf\r\n        );\r\n        if(res.data.success){\r\n            setPosts(prev=>[res.data.post,...prev]);\r\n        }\r\n    }\r\n\r\n    async function deletePost(postid) {\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.delete(`/api/posts/delete/${postid}`,conf);\r\n        if(res.data.success){\r\n            setPosts(posts.filter(post=>post.postid!==postid));\r\n            setPostToDelete(null);\r\n        }\r\n    }\r\n\r\n    async function editPost(postid,content) {\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.put(`/api/posts/edit/${postid}`,\r\n            JSON.stringify({\r\n                content: content\r\n            })\r\n        ,conf);\r\n        if(res.data.success){\r\n            let tempPosts = [...posts];\r\n            let index = tempPosts.findIndex(i => i.postid === postid);\r\n            tempPosts[index].content = res.data.post.content;\r\n            tempPosts[index].editTime = res.data.post.editTime;\r\n            setPosts(tempPosts);            \r\n        }\r\n    }\r\n\r\n    async function handlePostLike(postid){\r\n        if(!localStorage.getItem(\"jwt\"))return;\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.get(`/api/posts/${postid}/like`,conf);\r\n        if(res.data.success){            \r\n            let tempPosts = [...posts];\r\n            let index = tempPosts.findIndex(i => i.postid === postid);\r\n            if(tempPosts[index].hasLike){\r\n                tempPosts[index].numOfLikes -= 1;\r\n                tempPosts[index].hasLike = !tempPosts[index].hasLike;\r\n            }else{\r\n                tempPosts[index].numOfLikes += 1;\r\n                tempPosts[index].hasLike = !tempPosts[index].hasLike;\r\n            }\r\n            \r\n            \r\n            setPosts(tempPosts);\r\n        }\r\n    }\r\n    \r\n    //get post liked by\r\n    async function getPostLikedBy(postid){\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        }; \r\n        const res = await axios.get(`/api/posts/like/${postid}`,conf);\r\n        if(res.data.success){  \r\n            setLikedBy(res.data.likedBy); \r\n            setLikeListLoading(false);\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    //comment \r\n\r\n    \r\n    \r\n    async function addComment(postid,comment){\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.post(`/api/comments/${postid}`,\r\n        JSON.stringify({\r\n            comment: comment            \r\n        }),\r\n        conf\r\n        );\r\n        if(res.data.success){\r\n            let tempPosts = [...posts];\r\n            let index = tempPosts.findIndex(i => i.postid === postid);\r\n            tempPosts[index].comments.push(res.data.comment);\r\n            setPosts(tempPosts);\r\n        }\r\n    }\r\n\r\n    async function deleteComment(postid,commentid) {\r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.delete(`/api/comments/delete/${commentid}`,conf);\r\n        if(res.data.success){\r\n            let tempPosts = [...posts];\r\n            let index = tempPosts.findIndex(i => i.postid === postid);\r\n            tempPosts[index].comments=tempPosts[index].comments.filter(comment=>comment.commentid!==commentid);\r\n            setPosts(tempPosts);\r\n            setcommentToDelete(null);\r\n        }\r\n    }\r\n    async function handleCommentLike(postid,commentid){\r\n        if(!localStorage.getItem(\"jwt\"))return;        \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };\r\n        const res = await axios.get(`/api/comments/${postid}/${commentid}/like`,conf);\r\n        if(res.data.success){            \r\n            let tempPosts = [...posts];\r\n            let index = tempPosts.findIndex(i => i.postid === postid);\r\n            let j = tempPosts[index].comments.findIndex(i => i.commentid === commentid);\r\n            if(tempPosts[index].comments[j].hasLike){\r\n                tempPosts[index].comments[j].numOfLikes -= 1;\r\n                tempPosts[index].comments[j].hasLike = !tempPosts[index].comments[j].hasLike;\r\n            }else{\r\n                tempPosts[index].comments[j].numOfLikes += 1;\r\n                tempPosts[index].comments[j].hasLike = !tempPosts[index].comments[j].hasLike;\r\n            }\r\n            setPosts(tempPosts);\r\n        }\r\n    }\r\n   \r\n\r\n    //get comment liked by\r\n    async function getCommentLikedBy(commentid){\r\n  \r\n        await checkToken();\r\n        const token = \"bearer \" + JSON.parse(localStorage.getItem(\"jwt\")).token;\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"authorization\": token\r\n            }\r\n        };   \r\n        const res = await axios.get(`/api/comments/like/${commentid}`,conf);\r\n        if(res.data.success){\r\n            setLikedBy(res.data.likedBy); \r\n            setLikeListLoading(false);\r\n        }\r\n    }\r\n    \r\n    return (<PostsContext.Provider value={{     \r\n        posts,   \r\n        getPosts,\r\n        getFeed,\r\n        addPost,\r\n        editPost,\r\n        deletePost,\r\n        handlePostLike,\r\n        getPostLikedBy,\r\n        likedBy,\r\n        addComment,\r\n        deleteComment,\r\n        handleCommentLike,\r\n        getCommentLikedBy,\r\n        postLoading,\r\n        likeListloading,\r\n        postToDelete,\r\n        setPostToDelete,\r\n        commentToDelete,\r\n        setcommentToDelete        \r\n    }}>\r\n        {children}\r\n    </PostsContext.Provider>);\r\n}","import React, { useContext } from 'react';\r\nimport { PostsContext } from '../context/PostsState';\r\n\r\nconst Comment = ({comment,postUsername})=> {\r\n    const {handleCommentLike,getCommentLikedBy,setcommentToDelete} = useContext(PostsContext);\r\n   \r\n    return (\r\n            <div className=\"media\" >\r\n            <a href={`/profile/${comment.username}`}><img src={`/img/${comment.pic}`} className=\"mr-3 img-thumbnail profile-pic\"  /></a>\r\n            <div className=\"media-body w-100\">\r\n                <div className=\"d-flex\">\r\n                    <div>\r\n                    \r\n                    <a href={`/profile/${comment.username}`}><h5 className=\"mt-0\">{comment.nickname}</h5> </a>               \r\n                    {comment.editTime?\r\n                        <small className=\"text-muted\">Last Edited at: {comment.editTime}</small>\r\n                        :\r\n                        <small className=\"text-muted\">Posted at: {comment.postTime}</small> \r\n                    }            \r\n                    <h5 style={{\"whiteSpace\": \"pre-line\"}}>{comment.comment}</h5>  \r\n                    </div>\r\n                    {   !localStorage.getItem(\"jwt\")?null:\r\n                        (comment.username==JSON.parse(localStorage.getItem(\"jwt\")).username||postUsername==JSON.parse(localStorage.getItem(\"jwt\")).username)?\r\n                        <div className=\"ml-auto mr-2\">\r\n                            <span className=\"material-icons icon-btn\" data-toggle=\"modal\" data-target=\"#deleteConfirm\" onClick={()=>setcommentToDelete([comment.postid,comment.commentid])}>delete</span>                    \r\n                        </div>:null\r\n\r\n                    }\r\n                </div>\r\n                \r\n                <hr/>\r\n                \r\n                    \r\n                    <div>\r\n                    <span className=\"icon-btn icon-color\" onClick={()=>{handleCommentLike(comment.postid,comment.commentid)}}>\r\n                        {comment.hasLike?\r\n                        <span className=\"material-icons align-middle like-after\">favorite</span>:\r\n                        <span className=\"material-icons align-middle\">favorite_border</span>}                    \r\n                    </span>\r\n                    {comment.numOfLikes>0?<span data-toggle=\"modal\" data-target=\"#likedByList\" className=\"align-middle ml-1 icon-btn icon-color\" onClick={()=>{getCommentLikedBy(comment.commentid)}}>{comment.numOfLikes}</span>:null}\r\n                    </div>\r\n                <hr/> \r\n            </div>     \r\n                   \r\n        </div> \r\n         \r\n    );\r\n}\r\n\r\nexport default Comment;\r\n","import React, {  useContext } from 'react';\r\nimport Comment from './Comment'\r\n\r\nconst Comments = ({post}) => {   \r\n  \r\n  \r\n    return (\r\n        <div>\r\n            {\r\n            post.comments.map((comment,i)=>(\r\n                <Comment key={i} comment={comment} postUsername={post.username}/>\r\n            ))\r\n            }\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Comments\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport { PostsContext } from '../context/PostsState';\r\nimport { GlobalContext } from '../context/GlobalState';\r\nimport Comments from './Comments'\r\n\r\nconst Post = ({post})=> {\r\n    const [ comment, setComment ] = useState(\"\");\r\n    const {handlePostLike,getPostLikedBy,addComment,setPostToDelete,editPost} = useContext(PostsContext);\r\n    const {info,infoLoading} = useContext(GlobalContext); \r\n   \r\n    const [editMode, setEditMode] = useState(false);\r\n    const [editContent, setEditContent] = useState(\"\");\r\n    \r\n    const handleComment = async (e)=>{\r\n        e.preventDefault();\r\n        if(!comment || comment.trim().length === 0) {\r\n            setComment(\"\");\r\n        }else{\r\n            await addComment(post.postid,comment);\r\n            setComment(\"\");\r\n        }\r\n    }\r\n   \r\n    useEffect(()=>{\r\n        setEditContent(post.content);\r\n    },[post.content])\r\n\r\n    \r\n\r\n    const handleEdit = async (e) => {\r\n        e.preventDefault();\r\n        if(!editContent || editContent.trim().length === 0) {\r\n            setEditContent(\"\");\r\n        }else{\r\n            await editPost(post.postid,editContent);\r\n            setEditContent(\"\");\r\n            setEditMode(!editMode);\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <>\r\n        <div className=\"Post media py-3 my-2 px-2 border rounded\" >         \r\n        <a href={`/profile/${post.username}`}><img src={`/img/${post.pic}`} className=\"mr-2 img-thumbnail profile-pic\"  /></a>\r\n            <div className=\"media-body w-100\">\r\n                <div className=\"d-flex\">\r\n                    <div>                    \r\n                    <a href={`/profile/${post.username}`}><h5 className=\"mt-0\">{post.nickname}</h5> </a>\r\n                    {post.editTime?\r\n                        <small className=\"text-muted\">Last Edited at: {post.editTime}</small>\r\n                        :\r\n                        <small className=\"text-muted\">Posted at: {post.postTime}</small> \r\n                    }            \r\n                    {   !localStorage.getItem(\"jwt\")?null:\r\n                        !editMode?<h5 style={{\"whiteSpace\": \"pre-line\"}}>{post.content}</h5>:\r\n                        <div>\r\n                            <form className=\"w-100\" onSubmit={(e) => {handleEdit(e)}}>\r\n                                <textarea className=\"form-control mb-2 \" value={editContent} onChange={(e) => setEditContent(e.target.value)}  />\r\n                                <button className=\"btn btn-light mb-2 \" type=\"submit\">Edit</button>\r\n                                <button className=\"btn btn-light mb-2 ml-2 \" onClick={()=>{setEditContent(post.content);setEditMode(!editMode)}}>Cancel</button>\r\n                            </form>\r\n                        </div>\r\n                        \r\n                    }\r\n                    {\r\n                        !post.postPic?null:\r\n                        <img src={`/img/${post.postPic}`} className=\" img-thumbnail post-pic\"  />\r\n                        }\r\n                    </div>\r\n                    {   !localStorage.getItem(\"jwt\")?null:\r\n                        post.username===JSON.parse(localStorage.getItem(\"jwt\")).username?\r\n                        <div className=\"ml-auto\">\r\n                            <div className=\"material-icons icon-btn\" onClick={()=>{setEditMode(!editMode)}}>edit</div>\r\n                            <div className=\"material-icons icon-btn\" data-toggle=\"modal\" data-target=\"#deleteConfirm\" onClick={()=>setPostToDelete(post.postid)}>delete</div>                    \r\n                        </div>:null\r\n                    }\r\n                    \r\n                </div>\r\n                \r\n                <hr/>\r\n              \r\n                    <div>\r\n                    <span className=\"icon-btn\" onClick={()=>{handlePostLike(post.postid)}}>\r\n                        {post.hasLike?\r\n                        <span className=\"material-icons align-middle like-after\">favorite</span>:\r\n                        <span className=\"material-icons align-middle\">favorite_border</span>}                    \r\n                    </span>\r\n                    {post.numOfLikes>0?<span data-toggle=\"modal\" data-target=\"#likedByList\" className=\"align-middle ml-1 icon-btn icon-color\" onClick={()=>getPostLikedBy(post.postid)}>{post.numOfLikes}</span>\r\n                                      \r\n                   :null}\r\n                    </div> \r\n                <hr/> \r\n                            \r\n                \r\n                {<Comments post={post}/>}\r\n                {(localStorage.getItem(\"jwt\"))?\r\n                    <div className=\"media\">\r\n                    {\r\n                        infoLoading?null:\r\n                        <img src={`/img/${info.pic}`} className=\"mr-3 img-thumbnail profile-pic\"  />\r\n                    }\r\n                    \r\n                   \r\n                    <form className=\"media-body w-100\" onSubmit={(e)=>{handleComment(e)}}>\r\n                    <textarea className=\"form-control mb-2\" value={comment} onChange={(e)=>setComment(e.target.value)} placeholder=\"Leave some comments...\"/>\r\n                    <button className=\"btn btn-light mb-2\" type=\"submit\">Comment</button>\r\n                    </form>\r\n                    </div>                \r\n                    :null\r\n                }\r\n            </div>            \r\n        </div>\r\n        \r\n            \r\n          \r\n     </>         \r\n    );\r\n}\r\n\r\nexport default Post;\r\n","import React, {  useContext, useEffect } from 'react';\r\nimport { PostsContext } from '../context/PostsState';\r\nimport Post from './Post';\r\nimport Loading from './Loading';\r\n\r\nconst Posts = () => {\r\n    const {posts,likedBy,postLoading,likeListloading,setPostToDelete,postToDelete,deletePost,setcommentToDelete,commentToDelete,deleteComment} = useContext(PostsContext);\r\n   \r\n    const handleDelete = async ()=>{\r\n        if(postToDelete){\r\n            await deletePost(postToDelete);\r\n        }\r\n        if(commentToDelete){\r\n            await deleteComment(commentToDelete[0],commentToDelete[1]);\r\n        }\r\n        \r\n    }\r\n\r\n    return (\r\n        <>\r\n        {\r\n            postLoading?<Loading />:\r\n            <div className=\"Posts\">\r\n            {\r\n                posts.length >0?\r\n                posts.map((post,index)=>(\r\n                    <Post key={index}  post={post}/>\r\n                )):\r\n                <div className=\"d-flex justify-content-center\">\r\n                        <h5>This user hasn't posted anything yet</h5>\r\n                </div>\r\n            }\r\n            <div className=\"modal\" id=\"likedByList\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"likedByListTitle\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog modal-dialog-scrollable modal-dialog-centered\" role=\"document\">\r\n            <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\" id=\"likedByListTitle\">liked By</h5>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div className=\"modal-body\">   \r\n            {   likeListloading?<Loading />:\r\n                likedBy.map((like,index)=>(                            \r\n                    <a key={index}  href={`/profile/${like.username}`}>\r\n                    <div className=\"media mx-2 my-2 px-2 border rounded\" > \r\n                    <a href={`/profile/${like.username}`}><img src={`/img/${like.pic}`} className=\"mr-3 img-thumbnail profile-pic\"  /></a>\r\n                        <div className=\"media-body w-100 mt-2\">\r\n                        <a href={`/profile/${like.username}`}>\r\n                            <h5 className=\"mt-0\">{like.nickname}</h5>\r\n                            <h5 className=\"mt-0 text-muted\">@{like.username}</h5>\r\n                        </a>\r\n                        </div>\r\n                    </div>\r\n                    </a>\r\n                ))\r\n                }                  \r\n                \r\n            \r\n            </div>\r\n            <div className=\"modal-footer\">\r\n                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>                        \r\n            </div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        \r\n        <div className=\"modal\" id=\"deleteConfirm\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"deleteConfirmLabel\" aria-hidden=\"true\">\r\n        <div className=\"modal-dialog\" role=\"document\">\r\n            <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n                <div className=\"modal-title\" id=\"deleteConfirmLabel\">\r\n                <h5>Do you want to delete this {postToDelete?\"post\":\"comment\"}?</h5>\r\n                <small className=\"text-muted\">This cannot be undone!</small>\r\n                </div>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n                <button type=\"button\" className=\"btn btn-light\" data-dismiss=\"modal\" onClick={()=>handleDelete()}>Delete</button>\r\n                {\r\n                    postToDelete?\r\n                    <button type=\"button\" className=\"btn btn-light\" data-dismiss=\"modal\" onClick={()=>setPostToDelete(null)}>Cancel</button>\r\n                    :\r\n                    <button type=\"button\" className=\"btn btn-light\" data-dismiss=\"modal\" onClick={()=>setcommentToDelete(null)}>Cancel</button>\r\n                }\r\n                \r\n                \r\n            </div>\r\n            </div>\r\n        </div>\r\n        </div>    \r\n\r\n        \r\n        </div>\r\n        }\r\n        </>\r\n        \r\n    )\r\n}\r\n\r\nexport default Posts\r\n","import React, { useState, useContext, useEffect} from 'react';\r\nimport { PostsContext } from '../context/PostsState';\r\nimport { ProfileContext } from '../context/ProfileState'\r\nimport { GlobalContext } from '../context/GlobalState'\r\nimport Loading from './Loading';\r\nimport Posts from './Posts';\r\nimport { useParams  } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst ProfilePosts = () => {\r\n    const [pic, setPic] = useState(\"\");\r\n    const [selected, setSelected] = useState(\"\");\r\n    const [content, setContent] = useState(\"\");\r\n    const {getPosts,addPost} = useContext(PostsContext);\r\n    const {permission ,permissionLoading,profileLoading,getPermission, profile} = useContext(ProfileContext);\r\n    const {info,infoLoading} = useContext(GlobalContext); \r\n    let { username } = useParams();\r\n \r\n   \r\n    const handlePost = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if((content&&content.trim().length > 0)||(pic || pic.trim().length > 0)){\r\n            await addPost(content,pic);\r\n            setContent(\"\");\r\n            setPic(\"\");\r\n            setSelected(\"\");\r\n        }else{\r\n            setContent(\"\");\r\n        }\r\n    }\r\n\r\n    const handleUpload = async (e) => {\r\n        if(!e.target.files[0]) return;\r\n        setSelected(e.target.files[0]);\r\n        var formData = new FormData();\r\n        formData.append(\"image\", e.target.files[0]);\r\n        const conf = {\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded',\r\n            }\r\n        };\r\n        const res = await axios.post(`/upload/image`,formData,conf);\r\n        if(res.data.success){\r\n            setPic(res.data.image);\r\n        }\r\n    }\r\n    useEffect(()=>{\r\n        if(permission)\r\n            getPosts(username);        \r\n    },[permission]); \r\n    \r\n\r\n    return (\r\n        <>\r\n            { profileLoading?null:(localStorage.getItem(\"jwt\") && (JSON.parse(localStorage.getItem(\"jwt\")).username === username)) ?\r\n                <div className=\"media my-4 py-3 ml-3 mr-2\">\r\n                   {infoLoading?null:\r\n                      <img src={`/img/${info.pic}`} className=\"mr-3 img-thumbnail profile-pic\"  /> \r\n                   }\r\n                    \r\n                    \r\n                    <form className=\" media-body w-100\" onSubmit={(e) => { handlePost(e) }}>\r\n                        <textarea className=\"form-control mb-2 \" value={content} onChange={(e) => setContent(e.target.value)} placeholder={`Hello ${JSON.parse(localStorage.getItem(\"jwt\")).nickname}, how are you today?`} />\r\n                        {pic?\r\n                        <div className=\"preview\">\r\n                        <img src={`/img/${pic}`} className=\"mr-3 img-thumbnail profile-pic\"  />\r\n                        </div>:null\r\n                        } \r\n                        <div className=\"custom-file my-2\">\r\n                            <input type=\"file\" className=\"custom-file-input\" id=\"customFile\" accept=\".jpg,.png,.svg,.gif\" onChange={(e)=>{handleUpload(e)}}/>\r\n                            <label className=\"custom-file-label\" htmlFor=\"customFile\"><span className=\"material-icons align-middle\"> add_photo_alternate</span> {selected.name}</label>\r\n                        </div> \r\n                        <button className=\"btn btn-light mb-2 \" type=\"submit\">Post</button>\r\n                    </form>\r\n                </div>:null\r\n               \r\n            }\r\n\r\n            {          \r\n                profileLoading?<Loading />:  \r\n                (permission) ?\r\n                    <Posts />\r\n                    : \r\n                    <div className=\"d-flex mt-2 justify-content-center\">\r\n                        <h5>This account is private</h5>\r\n                    </div>\r\n            }\r\n           \r\n            \r\n        \r\n        </>\r\n        \r\n\r\n    );\r\n\r\n}\r\n\r\nexport default ProfilePosts;\r\n","import React from 'react'\r\n\r\nconst Denied = () => {\r\n    return (\r\n        <div className=\"d-flex justify-content-center\">\r\n            <h5>Access Denied</h5>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Denied\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport  { useHistory,useParams } from 'react-router-dom';\r\nimport { ProfileContext } from '../context/ProfileState'\r\nimport Loading from './Loading';\r\nimport Denied from './Denied';\r\n\r\nconst FriendRequests = () => {\r\n    const {  friendRequests, acceptRequest, cancelRequest,friendRequestsLoading,getFriendRequests} = useContext(ProfileContext);\r\n    let { username }= useParams();\r\n   \r\n    useEffect(()=>{\r\n        if(localStorage.getItem(\"jwt\")&&JSON.parse(localStorage.getItem(\"jwt\")).username===username)\r\n            getFriendRequests(username);\r\n    },[])\r\n    return (\r\n        <>\r\n        {\r\n        !localStorage.getItem(\"jwt\")?<Denied/>:\r\n        JSON.parse(localStorage.getItem(\"jwt\")).username!==username?<Denied />:\r\n        friendRequestsLoading?<Loading />:\r\n        <div>\r\n            <h3 className=\"mx-2 my-4 px-2 py-3\">Friend Requests</h3>\r\n                <div className=\"mx-5\">\r\n                    <h5>Recieved Friend Request</h5>\r\n                    {\r\n                        friendRequests.received.length>0?\r\n                        friendRequests.received.map((req,index)=>(\r\n                            <div key={index} className=\"media mx-2 my-2 px-2 py-2 border rounded\" > \r\n                                <a  href={`/profile/${req.username}`}>\r\n                                <img src={`/img/${req.pic}`} className=\"mr-3 img-thumbnail profile-pic\"  />\r\n                                </a>\r\n                                <div className=\"media-body w-100\">\r\n                                    <div className=\"d-flex\">\r\n                                        <div>\r\n                                            <a href={`/profile/${req.username}`}><h5 className=\"mt-0\">{req.nickname}</h5></a>\r\n                                        </div>\r\n                                        <div className=\"ml-auto \">\r\n                                            <div className=\"btn btn-light\" onClick={()=>acceptRequest(req.username)}>Accept</div>\r\n                                            <div className=\"btn btn-light ml-2\" onClick={()=>cancelRequest(req.username)}>Cancel</div>\r\n                                        </div>\r\n                                    </div>\r\n                                \r\n                                </div>\r\n                            </div>\r\n                       \r\n                        )) :\r\n                        <div className=\"d-flex justify-content-center\">\r\n                            <h5>You haven't received any friend requests yet.</h5>\r\n                        </div>\r\n                    }\r\n                    <hr/>\r\n                    <h5>Sent Friend Request</h5>\r\n                    {\r\n                        friendRequests.sent.length>0?\r\n                        friendRequests.sent.map((req,index)=>(\r\n                            <div key={index} className=\"media mx-2 my-2 px-2 py-2 border rounded\" > \r\n                                <a  href={`/profile/${req.username}`}>\r\n                                <img src={`/img/${req.pic}`} className=\"mr-3 img-thumbnail profile-pic\"  />\r\n                                </a>\r\n                                <div className=\"media-body w-100\">\r\n                                    <div className=\"d-flex\">\r\n                                        <div>\r\n                                            <a href={`/profile/${req.username}`}>\r\n                                                <h5 className=\"mt-0\">{req.nickname}</h5>\r\n                                                <h5 className=\"mt-0 text-muted\">@{req.username}</h5>\r\n                                            </a>\r\n                                        </div>\r\n                                        <div className=\"ml-auto \">\r\n                                            <div className=\"btn btn-light ml-2\" onClick={()=>cancelRequest(req.username)}>Cancel</div>\r\n                                        </div>\r\n                                    </div>\r\n                                \r\n                                </div>\r\n                            </div>\r\n                       \r\n                        )) :\r\n                        <div className=\"d-flex justify-content-center\">\r\n                            <h5>You haven't sent any friend requests yet.</h5>\r\n                        </div>\r\n                    }\r\n                </div>\r\n                \r\n            \r\n        </div>\r\n        }\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default FriendRequests;\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport  { useHistory,useParams } from 'react-router-dom';\r\nimport { ProfileContext } from '../context/ProfileState'\r\nimport Loading from './Loading';\r\nimport FriendRequests from './FriendRequests';\r\n\r\nconst Friends = () => {\r\n    const { friends,getFriends, friendsLoading,unFriend,cancelRequest,acceptRequest,sentRequest} = useContext(ProfileContext);\r\n    let { username }= useParams();\r\n   \r\n    useEffect(()=>{\r\n        getFriends(username);\r\n    },[])\r\n    return (\r\n        <>\r\n            {\r\n                friendsLoading?<Loading />:\r\n                <div>\r\n                <h3 className=\"mx-2 my-4 px-2 py-3\">Friends</h3>\r\n                {friends.length===0?\r\n                <div className=\"d-flex justify-content-center\">\r\n                <h5>No friend</h5>\r\n                </div>:\r\n                friends.map((friend,index)=>(\r\n                  \r\n                        <div key={index} className=\"media mx-2 my-2 px-2 py-2 border rounded\" > \r\n                              <a  href={`/profile/${friend.username}`}><img src={`/img/${friend.pic}`} className=\"mr-3 img-thumbnail profile-pic\"/></a>\r\n                            <div className=\"media-body w-100\">\r\n                                <div className=\"d-flex\">\r\n                                    <div>\r\n                                    <a  href={`/profile/${friend.username}`}>\r\n                                        <h5 className=\"mt-0\">{friend.nickname}</h5>\r\n                                        <h5 className=\"mt-0 text-muted\">@{friend.username}</h5>\r\n                                    </a>\r\n                                    \r\n                                    </div>\r\n                                    <div className=\"ml-auto mr-2\">\r\n                                        {\r\n                                            !localStorage.getItem(\"jwt\")?null:\r\n                                            <>\r\n                                                {\r\n                                                    friend.isFriend?\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{unFriend(friend.username)}}>Unfriend</div>:\r\n                                                    friend.isSent?\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{cancelRequest(friend.username)}}>Cancel Request</div>:\r\n                                                    friend.isReceived?\r\n                                                    <>\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{acceptRequest(friend.username)}}>Accept Request</div>\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{cancelRequest(friend.username)}}>Reject Request</div>\r\n                                                    </>:\r\n                                                    friend.username!==JSON.parse(localStorage.getItem(\"jwt\")).username?\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{sentRequest(friend.username)}}>Add Friend</div>\r\n                                                    :\r\n                                                    null\r\n\r\n                                                }\r\n                                            </>\r\n                                        }\r\n                                    </div>\r\n                                </div>     \r\n                            </div>\r\n                        </div>\r\n                   \r\n                ))}\r\n                \r\n            </div>\r\n        }\r\n        </>\r\n        \r\n    )\r\n}\r\n\r\nexport default Friends\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport  { useHistory,useParams } from 'react-router-dom';\r\nimport { ProfileContext } from '../context/ProfileState'\r\nimport Loading from './Loading';\r\nimport Denied from './Denied';\r\nimport axios from 'axios';\r\n\r\nconst ProfileSetting = () => {\r\n    const { msg, setMsg,error,setError, editPassword,editNickname,editBio,editPublicity,editPic, profile,profileLoading} = useContext(ProfileContext);\r\n    let { username }= useParams();\r\n    const [password, setPassword] = useState(\"\");\r\n    const [newPassword, setNewPassword] = useState(\"\");\r\n    const [bio, setBio] = useState(\"\");\r\n    const [nickname, setNickname] = useState(\"\");\r\n    const [publicity, setPublicity] = useState(\"\");\r\n    const [currentEdit, setCurrentEdit] = useState(\"\");\r\n    const [pic, setPic] = useState(\"\");\r\n    const [selected, setSelected] = useState(\"\");\r\n\r\n\r\n    \r\n    const handleChangePassword = async (e)=>{\r\n        setCurrentEdit(\"password\");\r\n        setMsg(\"\");\r\n        setError(\"\");\r\n        e.preventDefault();\r\n        if((!password || password.trim().length === 0)  && (!newPassword || newPassword.trim().length === 0)){\r\n            setError(\"Please enter the field\");\r\n        }else{\r\n            if(password===newPassword){\r\n                setError(\"Please enter a new password\");\r\n            }else{                \r\n                await editPassword({password:password, newPassword:newPassword});\r\n            }\r\n        }\r\n        setPassword(\"\");\r\n        setNewPassword(\"\");\r\n    }\r\n\r\n    const handleChangeNickname = async (e)=>{\r\n        setCurrentEdit(\"nickname\");\r\n        setMsg(\"\");\r\n        setError(\"\");\r\n        e.preventDefault();\r\n        if((!nickname || nickname.trim().length === 0)){\r\n            setError(\"Please enter the field\");            \r\n        }else{\r\n            await editNickname(nickname);\r\n        }\r\n        \r\n    }\r\n\r\n    const handleChangeBio = async (e)=>{\r\n        setCurrentEdit(\"bio\");\r\n        setMsg(\"\");\r\n        setError(\"\");\r\n        e.preventDefault();\r\n        if((!bio || bio.trim().length === 0)){\r\n            setError(\"Please enter the field\");            \r\n        }else{\r\n            await editBio(bio);\r\n        }\r\n    }\r\n\r\n    const handleChangePublicity = async (e)=>{\r\n        setCurrentEdit(\"publicity\");\r\n        setMsg(\"\");\r\n        setError(\"\");\r\n        e.preventDefault();\r\n        if((!publicity || publicity.trim().length === 0)){\r\n            setError(\"Please choose an option\");            \r\n        }else{\r\n            await editPublicity(publicity);\r\n        }\r\n    }\r\n\r\n    const handleChangePic = async (e)=>{\r\n        setCurrentEdit(\"pic\");\r\n        setMsg(\"\");\r\n        setError(\"\");\r\n        e.preventDefault();\r\n        if((!pic || pic.trim().length === 0)){\r\n            setError(\"Please choose a photo\");            \r\n        }else{\r\n            await editPic(pic);\r\n            setPic(\"\");\r\n            setSelected(\"\");\r\n        }\r\n    }\r\n\r\n    const handleUpload = async (e) => {\r\n        if(!e.target.files[0]) return;\r\n        setSelected(e.target.files[0]);\r\n        var formData = new FormData();\r\n        formData.append(\"image\", e.target.files[0]);\r\n        const conf = {\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded',\r\n            }\r\n        };\r\n        const res = await axios.post(`/upload/image`,formData,conf);\r\n        if(res.data.success){\r\n            setPic(res.data.image);\r\n        }\r\n    }\r\n   \r\n\r\n    return (\r\n        <>\r\n            {\r\n                !localStorage.getItem(\"jwt\")?<Denied />:\r\n                JSON.parse(localStorage.getItem(\"jwt\")).username!==username?<Denied />:\r\n                profileLoading?<Loading />:\r\n                <div>\r\n                    <h3  className=\"mx-2 my-4 px-2 py-3\">Account Setting</h3>\r\n                    <form className=\"mx-3 px-2 py-2 border rounded\" onSubmit={(e)=>{handleChangePassword(e)}}>\r\n                    {\r\n                    currentEdit===\"password\"?\r\n                    <>\r\n                    {error?<div className=\"alert alert-danger\" role=\"alert\">{error}</div>:null}\r\n                    {msg?<div className=\"alert alert-success\" role=\"alert\">{msg}</div>:null}\r\n                    </>\r\n                    :null\r\n                    }\r\n                        <h4  className=\"my-2\">Change Password</h4>\r\n                        <h5>Old password:</h5>\r\n                        <input className=\"form-control my-2\" type=\"password\" value={password} onChange={(e)=>{setPassword(e.target.value)}}  />\r\n                        <h5>New password:</h5>\r\n                        <input className=\"form-control my-2\" type=\"password\" value={newPassword} onChange={(e)=>{setNewPassword(e.target.value)}}  />\r\n                        <button className=\"btn btn-light my-2\"  type=\"submit\">Change Password</button>\r\n                    </form>\r\n                    <form className=\"mx-3 my-4 px-2 py-3 border rounded\" onSubmit={(e)=>{handleChangePic(e)}}>\r\n                    {\r\n                    currentEdit===\"pic\"?\r\n                    <>\r\n                    {error?<div className=\"alert alert-danger\" role=\"alert\">{error}</div>:null}\r\n                    {msg?<div className=\"alert alert-success\" role=\"alert\">{msg}</div>:null}\r\n                    </>\r\n                    :null\r\n                    }\r\n                        <h4  className=\"my-2\">Choose your pic</h4>\r\n                        {pic?\r\n                        <div className=\"preview\">\r\n                        <img src={`/img/${pic}`} className=\"mr-3 img-thumbnail profile-pic\"  />\r\n                        </div>:null\r\n                        }\r\n                        <div>\r\n                        <div className=\"custom-file my-2\">\r\n                            <input type=\"file\" className=\"custom-file-input\" id=\"customFile\" accept=\".jpg,.png,.svg,.gif\" onChange={(e)=>{handleUpload(e)}}/>\r\n                            <label className=\"custom-file-label\" htmlFor=\"customFile\"><span className=\"material-icons align-middle\"> add_photo_alternate</span> {selected.name}</label>\r\n                        </div>\r\n                        \r\n                        <button className=\"btn btn-light my-2 \"  type=\"submit\">Change Profile Pic</button>\r\n                        </div>\r\n                        \r\n                    </form>\r\n                    <form className=\"mx-3 my-4 px-2 py-3 border rounded\" onSubmit={(e)=>{handleChangeBio(e)}}>\r\n                    {\r\n                    currentEdit===\"bio\"?\r\n                    <>\r\n                    {error?<div className=\"alert alert-danger\" role=\"alert\">{error}</div>:null}\r\n                    {msg?<div className=\"alert alert-success\" role=\"alert\">{msg}</div>:null}\r\n                    </>\r\n                    :null\r\n                    }\r\n                        <h4  className=\"my-2\">Edit Bio</h4>                        \r\n                        <textarea className=\"form-control mb-2 \" defaultValue={profile.bio} onChange={(e)=>setBio(e.target.value)}  />\r\n                        <button className=\"btn btn-light my-2\"  type=\"submit\">Edit</button>\r\n                    </form>\r\n                    <form className=\"mx-3 my-4 px-2 py-3 border rounded\" onSubmit={(e)=>{handleChangeNickname(e)}}>\r\n                    {\r\n                    currentEdit===\"nickname\"?\r\n                    <>\r\n                    {error?<div className=\"alert alert-danger\" role=\"alert\">{error}</div>:null}\r\n                    {msg?<div className=\"alert alert-success\" role=\"alert\">{msg}</div>:null}\r\n                    </>\r\n                    :null\r\n                    }\r\n                        <h4  className=\"my-2\">Change your Name</h4>                        \r\n                        <input className=\"form-control my-2\" defaultValue={profile.nickname} onChange={(e)=>setNickname(e.target.value)} type=\"text\"  />\r\n                        \r\n                        <button className=\"btn btn-light my-2\"  type=\"submit\">Change Name</button>\r\n                    </form>\r\n                    <form className=\"mx-3 my-4 px-2 py-3 border rounded\" onSubmit={(e)=>{handleChangePublicity(e)}}>\r\n                    {\r\n                    currentEdit===\"publicity\"?\r\n                    <>\r\n                    {error?<div className=\"alert alert-danger\" role=\"alert\">{error}</div>:null}\r\n                    {msg?<div className=\"alert alert-success\" role=\"alert\">{msg}</div>:null}\r\n                    </>\r\n                    :null\r\n                    }\r\n                        <h4  className=\"my-2\">Change Publicity</h4>\r\n                        <select className=\"form-control my-2\" id=\"publicity\" defaultValue={profile.publicity} onChange={(e)=>{setPublicity(e.target[e.target.selectedIndex].value)}}  >\r\n                            <option value=\"public\" >Public</option>\r\n                            <option value=\"private\">Private</option>    \r\n                        </select>\r\n                        <button className=\"btn btn-light my-2\"  type=\"submit\">Change Publicity</button>\r\n                    </form>\r\n                    \r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProfileSetting\r\n","import React, { useState, useContext, useEffect} from 'react';\r\nimport { ProfileContext } from '../context/ProfileState';\r\nimport { GlobalContext } from '../context/GlobalState'\r\nimport Loading from './Loading';\r\nimport ProfileInfo from './ProfileInfo';\r\nimport ProfilePosts from './ProfilePosts';\r\nimport Friends from './Friends';\r\nimport FriendRequests from './FriendRequests';\r\nimport ProfileSetting from './ProfileSetting';\r\nimport page404 from './Page404'\r\nimport { BrowserRouter, Switch, Route, Link,Redirect,useRouteMatch, useParams  } from 'react-router-dom';\r\n\r\nconst Profile = () => {\r\n    const {getProfile,profile,profileLoading} = useContext(ProfileContext);\r\n    const { isLogin } = useContext(GlobalContext);\r\n    let { username } = useParams();\r\n    \r\n    useEffect(()=>{\r\n        getProfile(username);        \r\n    },[username,isLogin])\r\n\r\n    let match = useRouteMatch();\r\n   \r\n    return (\r\n        <>\r\n        {\r\n            profileLoading?null:\r\n            !profile.username?<page404 />:\r\n        <div className=\"profile\">\r\n        \r\n        <BrowserRouter>\r\n                <ProfileInfo />\r\n                \r\n            <div className=\"d-flex ml-2\">\r\n                <Link to={`${match.url}/posts`}><div className=\"btn btn-light\">Posts</div></Link>\r\n                <Link to={`${match.url}/friends`}><div className=\"btn btn-light\">Friends {profile.numOfFriends}</div></Link>\r\n                {localStorage.getItem(\"jwt\")&&JSON.parse(localStorage.getItem(\"jwt\")).username===username?<Link to={`${match.url}/requests`}><div className=\"btn btn-light\">Friend Requests</div></Link>:null}\r\n                {localStorage.getItem(\"jwt\")&&JSON.parse(localStorage.getItem(\"jwt\")).username===username?<Link to={`${match.url}/setting`}><div className=\"btn btn-light\">Account Setting</div></Link>:null}\r\n               \r\n            </div>\r\n            \r\n            <Switch>\r\n                <Route path={`${match.path}/posts`}  exact component={ProfilePosts}/> />\r\n                <Route path={`${match.path}/friends`} exact  component={Friends}/> />\r\n                <Route path={`${match.path}/requests`} exact  component={FriendRequests}/> />\r\n                <Route path={`${match.path}/setting`} exact component={ProfileSetting}/> />\r\n                <Redirect exact from={`${match.path}/`} to={`${match.path}/posts`} />\r\n          \r\n                \r\n            </Switch>\r\n        \r\n    </BrowserRouter>\r\n       \r\n        </div>\r\n    } \r\n</>\r\n    );\r\n\r\n}\r\n\r\nexport default Profile;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport  { useHistory } from 'react-router-dom'\r\nimport { PostsContext } from '../context/PostsState';\r\nimport { GlobalContext } from '../context/GlobalState';\r\nimport axios from 'axios';\r\nimport Loading from './Loading';\r\nimport Posts from './Posts';\r\n\r\nconst Feed = () => {\r\n    const [content, setContent] = useState(\"\");\r\n    const [pic, setPic] = useState(\"\");\r\n    const [selected, setSelected] = useState(\"\");\r\n    const { addPost,postLoading,getFeed } = useContext(PostsContext);\r\n    const {info,infoLoading} = useContext(GlobalContext); \r\n    let history = useHistory();\r\n\r\n    const handlePost = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if((content&&content.trim().length > 0)||(pic || pic.trim().length > 0)){\r\n            await addPost(content,pic);\r\n            setContent(\"\");\r\n            setPic(\"\");\r\n            setSelected(\"\");\r\n        }else{\r\n            setContent(\"\");\r\n        }\r\n    }\r\n    const handleUpload = async (e) => {\r\n        if(!e.target.files[0]) return;\r\n        setSelected(e.target.files[0]);\r\n        var formData = new FormData();\r\n        formData.append(\"image\", e.target.files[0]);\r\n        const conf = {\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded',\r\n            }\r\n        };\r\n        const res = await axios.post(`/upload/image`,formData,conf);\r\n        if(res.data.success){\r\n            setPic(res.data.image);\r\n        }\r\n    }\r\n    useEffect(()=>{\r\n        getFeed();\r\n    },[]); \r\n  \r\n    return (\r\n        <div>\r\n            <>\r\n            {infoLoading?null:\r\n            <div className=\"media mt-2 ml-3 mr-2\">\r\n                <a href={`/profile/${info.username}`}>\r\n                    <img src={`/img/${info.pic}`} className=\"mr-3 img-thumbnail profile-pic\"  />\r\n                </a>\r\n                <form className=\" media-body w-100\" onSubmit={(e) => { handlePost(e) }}>\r\n                    <textarea className=\"form-control mb-2 \" value={content} onChange={(e) => setContent(e.target.value)} placeholder={`Hello ${JSON.parse(localStorage.getItem(\"jwt\")).nickname}, how are you today?`} />\r\n                  \r\n                    {pic?\r\n                    <div className=\"preview\">\r\n                    <img src={`/img/${pic}`} className=\"mr-3 img-thumbnail profile-pic\"  />\r\n                    </div>:null\r\n                    } \r\n                    <div className=\"custom-file my-2\">\r\n                        <input type=\"file\" className=\"custom-file-input\" id=\"customFile\" accept=\".jpg,.png,.svg,.gif\" onChange={(e)=>{handleUpload(e)}}/>\r\n                        <label className=\"custom-file-label\" htmlFor=\"customFile\"><span className=\"material-icons align-middle\"> add_photo_alternate</span> {selected.name}</label>\r\n                    </div>     \r\n                    \r\n                    <button className=\"btn btn-light mb-2\" type=\"submit\">Post</button>              \r\n                    \r\n                    \r\n                    \r\n                    \r\n                    \r\n                </form>\r\n            </div>\r\n            }\r\n            <Posts />\r\n        </>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Feed;\r\n","import React,{useContext} from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst AuthRoute = ({component: Component, ...rest}) => {\r\n    return (\r\n        <Route {...rest} render={props => (\r\n            (localStorage.getItem(\"jwt\")) ?\r\n                <Component {...props} />\r\n            : <Redirect to=\"/login\" />\r\n        )} />\r\n    );\r\n};\r\n\r\nexport default AuthRoute;","import React, { useState, useContext, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport  { Link,Redirect,useHistory } from 'react-router-dom';\r\nimport { GlobalContext } from '../context/GlobalState'\r\n\r\nconst Login = ()=> {\r\n    const [email, setEmail] = useState(null);\r\n    const [password, setPassword] = useState(null);    \r\n    const [error, setError] = useState(\"\"); \r\n    const {msg, setMsg} = useContext(GlobalContext);     \r\n    let history = useHistory();\r\n\r\n    if(localStorage.getItem(\"jwt\")){\r\n        history.push('/');  \r\n    }\r\n\r\n    const handleLogin = async (e)=>{\r\n        e.preventDefault();       \r\n        setMsg(\"\");\r\n        setError(\"\");\r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        };\r\n        \r\n        const res = await axios.post(\"/api/auth/login\",\r\n        JSON.stringify({\r\n            email: email,\r\n            password: password\r\n        }),\r\n        conf\r\n        );\r\n        if(res.data.success){            \r\n            localStorage.setItem(\"jwt\",JSON.stringify({\r\n                token:res.data.token,\r\n                username: res.data.username, \r\n                nickname: res.data.nickname,               \r\n                login:true\r\n            }));\r\n            //setIsLogin(true);\r\n            window.location.href = \"/\";      \r\n        }else{\r\n            setEmail(\"\");\r\n            setPassword(\"\");\r\n            setError(res.data.msg);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <> \r\n            {error?<div className=\"alert alert-danger\" role=\"alert\">{error}</div>:null}\r\n            {msg?<div className=\"alert alert-success\" role=\"alert\">{msg}</div>:null}           \r\n            <form onSubmit={(e) => handleLogin(e)}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"email\">Email address</label>\r\n                    <input type=\"email\" value={email} onChange={\r\n                    (e) => setEmail(e.target.value)                    \r\n                    } className=\"form-control\" id=\"email\"  required/> \r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <input type=\"password\" value={password} onChange={\r\n                    (e) => setPassword(e.target.value)                    \r\n                    } className=\"form-control\" id=\"password\" required/>\r\n                </div>                \r\n               \r\n                <button type=\"submit\" className=\"btn btn-primary mr-2\">Login</button>        \r\n                <Link to=\"/register\"><button className=\"btn btn-primary mr-2\">Register</button></Link>           \r\n            </form>                  \r\n        </>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useState, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport  { useHistory } from 'react-router-dom';\r\nimport { GlobalContext } from '../context/GlobalState'\r\n\r\nconst Register = ()=> { \r\n    const [username, setUsername] = useState(null);\r\n    const [email, setEmail] = useState(null);\r\n    const [password, setPassword] = useState(null);    \r\n    const [nickname, setNickname] = useState(null);    \r\n    const [gender, setGender] = useState('M');    \r\n    const [birthday, setBirthday] = useState(null);\r\n    const [error, setError] = useState(false);  \r\n    const { setMsg } = useContext(GlobalContext);  \r\n    let history = useHistory();\r\n\r\n    if(localStorage.getItem(\"jwt\")&&JSON.parse(localStorage.getItem(\"jwt\")).login){\r\n        history.push('/home'); \r\n    }\r\n\r\n    const handleRegister = async (e)=>{\r\n        e.preventDefault();\r\n        \r\n        const conf = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        };\r\n        const res = await axios.post(\"/api/users/register\",\r\n        JSON.stringify({\r\n            username: username,\r\n            email: email,\r\n            password: password,\r\n            nickname: nickname,\r\n            gender: gender,\r\n            birthday: birthday\r\n        }),\r\n        conf\r\n        );\r\n        if(res.data.success){            \r\n            setPassword(\"\");            \r\n            setError(false);\r\n            setMsg(\"You can now login with your new account\");  \r\n            history.push(\"/login\");      \r\n        }else{\r\n            setPassword(\"\"); \r\n            setError(res.data.msg);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>            \r\n            {error?<div className=\"alert alert-danger\" role=\"alert\">{error}</div>:null}\r\n            <form onSubmit={(e) => {handleRegister(e)}}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"username\">Username</label>\r\n                    <input type=\"text\" onChange={\r\n                    (e) => setUsername(e.target.value)                    \r\n                    } className=\"form-control\" id=\"username\" aria-describedby=\"usernameText\" required/>                    \r\n                    <small id=\"usernameText\" className=\"form-text text-muted\">Your friends can find you with your username.</small>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"email\">Email</label>\r\n                    <input type=\"email\" onChange={\r\n                    (e) => setEmail(e.target.value)                    \r\n                    } className=\"form-control\" id=\"email\" aria-describedby=\"emailText\" required/>                    \r\n                    <small id=\"emailText\" className=\"form-text text-muted\">You can use your email to login.</small>\r\n                </div>   \r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <input type=\"password\" value={password} onChange={\r\n                    (e) => setPassword(e.target.value)                    \r\n                    } className=\"form-control\" id=\"password\" required/> \r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"nickName\">Nick Name</label>\r\n                    <input type=\"text\" onChange={\r\n                    (e) => setNickname(e.target.value)                    \r\n                    } className=\"form-control\" id=\"nickName\" required/> \r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label htmlFor=\"gender\">Gender</label>                    \r\n                    <select class=\"form-control\" id=\"gender\" onChange={(e)=>{setGender(e.target[e.target.selectedIndex].value)}} required>\r\n                        <option value=\"M\">Male</option>\r\n                        <option value=\"F\">Female</option>    \r\n                    </select>\r\n                </div>     \r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"birthday\">Birthday</label>\r\n                    <input type=\"date\" onChange={\r\n                    (e) => setBirthday(e.target.value)                    \r\n                    } className=\"form-control\" id=\"birthday\" required/> \r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-primary mr-2\">Register</button>                   \r\n            </form>\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport  { useHistory,useParams } from 'react-router-dom';\r\nimport Loading from './Loading';\r\nimport { GlobalContext } from '../context/GlobalState'\r\n\r\n\r\nconst Search = () => {\r\n    const { results,resultsLoading,search,unFriend,cancelRequest,acceptRequest,sentRequest } = useContext(GlobalContext);  \r\n    let { query } = useParams();\r\n    useEffect(()=>{\r\n        search(query);\r\n    },[query])\r\n    \r\n    return (\r\n        <>\r\n            {\r\n                resultsLoading?<Loading />:\r\n                <div>\r\n                <h3 className=\"mx-2 my-4 px-2 py-3\">Search Results</h3>\r\n                {\r\n                results.length===0?<div className=\"d-flex justify-content-center\">\r\n                        <h5>No results</h5>\r\n                        </div>:\r\n                results.map((result,index)=>(\r\n                  \r\n                        <div key={index} className=\"media mx-2 my-2 px-2 py-2 border rounded\" > \r\n                              <a  href={`/profile/${result.username}`}><img src={`/img/${result.pic}`} className=\"mr-3 img-thumbnail profile-pic\"/></a>\r\n                            <div className=\"media-body w-100\">\r\n                                <div className=\"d-flex\">\r\n                                    <div>\r\n                                    <a  href={`/profile/${result.username}`}>\r\n                                        <h5 className=\"mt-0\">{result.nickname}</h5>\r\n                                        <h5 className=\"mt-0 text-muted\">@{result.username}</h5>\r\n                                    </a>\r\n                                    </div>\r\n                                    <div className=\"ml-auto mr-2\">\r\n                                        {\r\n                                            !localStorage.getItem(\"jwt\")?null:\r\n                                            <>\r\n                                                {\r\n                                                    result.isFriend?\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{unFriend(result.username)}}>Unfriend</div>:\r\n                                                    result.isSent?\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{cancelRequest(result.username)}}>Cancel Request</div>:\r\n                                                    result.isReceived?\r\n                                                    <>\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{acceptRequest(result.username)}}>Accept Request</div>\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{cancelRequest(result.username)}}>Reject Request</div>\r\n                                                    </>:\r\n                                                    result.username!==JSON.parse(localStorage.getItem(\"jwt\")).username?\r\n                                                    <div className=\"btn btn-light ml-2\" onClick={()=>{sentRequest(result.username)}}>Add Friend</div>\r\n                                                    :\r\n                                                    null\r\n\r\n                                                }\r\n                                            </>\r\n                                        }\r\n                                    </div>\r\n                                </div>     \r\n                            </div>\r\n                        </div>\r\n                   \r\n                ))}\r\n                \r\n            </div>\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Search\r\n","import React, { useContext, useEffect,useState } from 'react';\nimport Profile from './components/Profile';\nimport Feed from './components/Feed';\nimport AuthRoute from './components/AuthRoute';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport { GlobalContext } from './context/GlobalState'\nimport { PostsProvider } from './context/PostsState'\nimport { ProfileProvider } from './context/ProfileState'\nimport { BrowserRouter, Switch, Route,Link,Redirect,useParams } from 'react-router-dom';\nimport Search from './components/Search';\nimport Page404 from './components/Page404';\nimport { Helmet } from 'react-helmet'\n\nfunction App() {\n  const {isLogin,setIsLogin,getInfo,info,logOut, setQuery,query,infoLoading} = useContext(GlobalContext); \n  \n\n  useEffect(()=>{\n    if(localStorage.getItem(\"jwt\")){\n      setIsLogin(true);\n    }else{\n      setIsLogin(false);\n    }\n  },[]) \n  useEffect(()=>{\n    if(isLogin||localStorage.getItem(\"jwt\"))\n      getInfo(JSON.parse(localStorage.getItem(\"jwt\")).username);\n  },[isLogin])\n\n  const handleLogOut=()=>{\n    logOut();\n    //window.location.href = \"/login\";\n  }\n  return (\n    <>\n     <Helmet>\n      <title>HOW's</title>\n    </Helmet>\n    <BrowserRouter>\n      <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />\n      \n        <nav  className=\"navbar navbar-expand-lg fixed-top navbar-light bg-white shadow-sm\">\n        <Link to={`/`}><img className=\"logo navbar-brand\" src={`${process.env.PUBLIC_URL}/logo.jpg`}/></Link>\n          <button  className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span  className=\"navbar-toggler-icon\"></span>\n          </button>\n          \n          <div  className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          {infoLoading?null:\n            !isLogin?null:\n            <form  className=\"form-inline ml-auto my-1 my-lg-0\" >\n              <input  className=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\" onChange={(e)=>{setQuery(e.target.value)}}/>\n              <Link to={`/search/${query}`}><button  className=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\">Search</button></Link>\n            </form>\n          }\n           {\n              !isLogin?\n            <ul className=\"navbar-nav ml-auto mr-4 mt-1\">\n             \n              <li className=\"nav-item\">\n              <a href=\"/login\" className=\"nav-link\">Login</a>\n              </li>\n              \n            </ul>:\n            <ul className=\"navbar-nav ml-auto mr-4 mt-1\">\n             \n             <li className=\"nav-item dropdown\">\n                <h5 className=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n           {infoLoading?null:<img src={`/img/${info.pic}`} className=\"mr-3 img-thumbnail profile-pic-xs\"  />}{info.nickname}\n                </h5>\n                <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdown\">\n                  <a className=\"dropdown-item\" href={`/profile/${info.username}`} >Profile</a>\n                  <div className=\"dropdown-divider\"></div>\n                  <div className=\"dropdown-item btn btn-light\"  onClick={()=>{handleLogOut()}}>LogOut</div>\n                </div>\n              </li>\n            \n          </ul>\n             }\n          </div>\n          \n        </nav>\n            \n        <div  className=\"container-fluid bg-white\" style={{marginTop:\"6.5rem\",width:\"95%\"}}>\n      <Switch>\n          <Route path=\"/login\"  component={Login} />\n          <Route path=\"/register\"  component={Register} />\n          <AuthRoute path=\"/search/:query\"  component={Search} />\n          <PostsProvider>\n          <AuthRoute path=\"/\" exact component={Feed} />\n          <ProfileProvider>\n              <Route path=\"/profile/:username\" component={Profile} />\n          </ProfileProvider>\n          </PostsProvider>\n          \n      </Switch>\n      </div>\n      \n    </BrowserRouter>\n    </>\n  );\n\n}\n\nexport default App;\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport Popper from 'popper.js';\nimport './index.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { GlobalProvider } from './context/GlobalState'\n\nReactDOM.render(\n  <GlobalProvider>\n    <App />\n  </GlobalProvider>\n  \n  ,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}